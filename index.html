<!DOCTYPE html>
<html lang="sq">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- 5. SEO Metadata -->
    <title>Kalkulatori i PagÃ«s, Freelancer & Influencer (ShqipÃ«ri 2025)</title>
    <meta name="description" content="Llogaritni pagÃ«n neto, koston totale dhe detyrimet si punonjÃ«s, profesionist i lirÃ« (freelancer) apo influencer nÃ« ShqipÃ«ri. Mjeti mÃ« i saktÃ« 2024/2025.">
    <meta name="keywords" content="kalkulator page, llogaritja e pages, paga bruto neto, kalkulator freelancer shqiperi, kalkulator influencer, tatimi mbi te ardhurat, sigurime shoqerore, profesionist i lire, kodi i punes">
    
    <!-- Open Graph (pÃ«r rrjetet sociale) -->
    <meta property="og:title" content="Kalkulatori i PagÃ«s, Freelancer & Influencer (ShqipÃ«ri 2025)">
    <meta property="og:description" content="Llogaritni pagÃ«n neto, koston totale dhe detyrimet si punonjÃ«s, profesionist i lirÃ« (freelancer) apo influencer nÃ« ShqipÃ«ri.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://[DOMENI_JUAJ_KETU]">
    <!-- <meta property="og:image" content="https://[URL_PER_IMAZHIN_PREVIEW]"> -->

    <!-- Ikona -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ‡¦ðŸ‡±</text></svg>">

    <!-- 5. SEO - Structured Data (JSON-LD) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SoftwareApplication",
      "name": "Kalkulatori i PagÃ«s, Freelancer & Influencer ShqipÃ«ri",
      "applicationCategory": "FinanceApplication",
      "operatingSystem": "Web",
      "offers": {
        "@type": "Offer",
        "price": "0"
      },
      "description": "Llogaritni pagÃ«n neto, koston e punÃ«dhÃ«nÃ«sit, dhe detyrimet si profesionist i lirÃ« (freelancer) apo influencer nÃ« ShqipÃ«ri bazuar nÃ« legjislacionin 2024/2025.",
      "author": {
        "@type": "Person",
        "name": "Kejsan Coku"
      }
    }
    </script>

    <!-- Ngarkimi i Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 6. Konfigurimi i Ngjyrave tÃ« Brandit -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'brand-cyan': '#54a09b',   // Gray Cyan
                        'brand-navy': '#000080',   // Navy Blue
                        'brand-red': '#fb6163',     // Vivid Red
                        'brand-white': '#ffffff',
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    
    <!-- Ngarkimi i React dhe Babel (pÃ«r JSX) -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Stili i PÃ«rgjithshÃ«m -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6; /* Tailwind 'gray-100' */
        }
        /* Stili pÃ«r scrollbar-in */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        ::-webkit-scrollbar-thumb {
            background: #54a09b; /* brand-cyan */
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #4a8c87;
        }
        /* BÃ«n qÃ« footeri tÃ« qÃ«ndrojÃ« poshtÃ« */
        #root {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        .main-layout {
            flex-grow: 1;
        }
    </style>
</head>
<body class="bg-gray-100">
    
    <!-- KÃ«tu do tÃ« ngarkohet aplikacioni React -->
    <div id="root"></div>

    <script type="text/babel">
        // Nuk ka nevojÃ« pÃ«r 'import React' pasi ngarkohet globalisht tek index.html

        const { useState, useMemo, useEffect, useCallback } = React;

        // --- IKONAT (SVG Inline) ---
        const IconCalculator = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="4" y="2" width="16" height="20" rx="2" ry="2"></rect><line x1="8" y1="6" x2="16" y2="6"></line><line x1="8" y1="10" x2="16" y2="10"></line><line x1="8" y1="14" x2="16" y2="14"></line><line x1="8" y1="18" x2="16" y2="18"></line></svg>
        );
        const IconUser = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
        );
        const IconBriefcase = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path></svg>
        );
        const IconCamera = () => (
             <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path><circle cx="12" cy="13" r="4"></circle></svg>
        );
        const IconInfo = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg>
        );
        const IconHelp = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"></circle><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>
        );
        const IconMail = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg>
        );
        const IconNewspaper = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M19 4H5a2 2 0 0 0-2 2v12"></path><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2"></path><path d="M7 8h6"></path><path d="M7 12h10"></path><path d="M7 16h10"></path></svg>
        );
        const IconLink = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>
        );
        const IconChevronDown = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>
        );
        const IconAlertTriangle = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>
        );
        const IconX = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
        );
        const IconUsers = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
        );
        const IconSettings = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 .25 1l.01.44a2 2 0 0 1-2 2l-.18.01a2 2 0 0 0-1.73 1l-.25.43a2 2 0 0 0 0 2l.08.15a2 2 0 0 0 .73 2.73l.38.22a2 2 0 0 0 2.73-.73l.1-.15a2 2 0 0 1 1-.25l.43-.01a2 2 0 0 1 2 2v.18a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.38a2 2 0 0 0-.73-2.73l-.15-.1a2 2 0 0 1-.25-1l-.01-.44a2 2 0 0 1 2-2l.18-.01a2 2 0 0 0 1.73-1l.25-.43a2 2 0 0 0 0-2l-.08-.15a2 2 0 0 0-.73-2.73l-.38-.22a2 2 0 0 0-2.73.73l-.1.15a2 2 0 0 1-1 .25l-.43.01a2 2 0 0 1-2-2v-.18a2 2 0 0 0-2-2z"></path><circle cx="12" cy="12" r="3"></circle></svg>
        );

        // --- INTERNATIONALIZATION (i18n) ---
        const translations = {
            sq: {
                // Navigimi
                navEmployee: "PunÃ«marrÃ«s",
                navFreelancer: "Freelancer",
                navInfluencer: "Influencer", // I RI
                navFreelancerGuide: "UdhÃ«zuesi Tatimor (2025)",
                navNews: "Lajme & PÃ«rditÃ«sime",
                navInfo: "Si funksionon?",
                navFAQ: "Pyetje tÃ« Shpeshta (FAQ)",
                navLinks: "Burime Zyrtare",
                navContact: "Kontakt",
                navTools: "Mjetet",
                navResources: "Burimet",
                // Header
                selectCurrency: "Monedha",
                // PÃ«rgjithshÃ«m
                gross: "Bruto",
                net: "Neto",
                // LlogaritÃ«si i PunonjÃ«sit
                employeeTitle: "Kalkulatori i PagÃ«s sÃ« PunÃ«marrÃ«sit",
                tapWarning: "**VÃ«rejtje 2025:** Kllapat e Tatimit (TAP) do tÃ« ndryshojnÃ« nÃ« Janar 2025. Llogaritja Ã«shtÃ« sipas rregullave aktuale 2024.",
                salaryInputMode: "Zgjidh mÃ«nyrÃ«n e inputit",
                modeGrossToNet: "Nga Bruto nÃ« Neto",
                modeNetToGross: "Nga Neto nÃ« Bruto",
                grossMonthlySalary: "Paga Bruto Mujore",
                netMonthlySalary: "Paga Neto Mujore",
                workingDays: "DitÃ« pune nÃ« muaj",
                grossSalary: "Paga Bruto",
                netSalary: "Paga Neto (NÃ« dorÃ«)",
                employeeDeductions: "Ndalesat e PunonjÃ«sit (Sig. + TAP)",
                employerTotalCost: "Kosto Totale e PunÃ«dhÃ«nÃ«sit",
                dailyGross: "Paga Bruto Ditore",
                dailyNet: "Paga Neto Ditore",
                deductionBreakdown: "Detajet e Zbritjeve & Kostove",
                employeeContributions: "1. Kontributet e PunonjÃ«sit (11.2%)",
                employeeTax: "2. Tatimi mbi PagÃ«n (TAP)",
                employerContributionsLabel: "3. Kontributet e PunÃ«dhÃ«nÃ«sit (16.7%)",
                employerSocial: "Sig. ShoqÃ«rore (15.0%)",
                employerHealth: "Sig. ShÃ«ndetÃ«sore (1.7%)",
                maxContributionBase: "Baza Maksimale e Kontributeve",
                // LlogaritÃ«si i Freelancer
                freelancerTitle: "LlogaritÃ«si i Detyrimeve (Profesionist i LirÃ«)",
                legislativeWarning: "VÃ‹REJTJE LEGJISLATIVE (2024-2025):",
                legislativeWarningText: "Kllapa e tatimit 15% (pÃ«r fitimin neto deri nÃ« 14 milionÃ« ALL) u shpall **jokushtetuese** nÃ« Qershor 2024. Qeveria po pÃ«rgatit njÃ« skemÃ« tÃ« re. Ky kalkulator reflekton rregullat mÃ« tÃ« pÃ«rditÃ«suara por shkalla e tatimit 0-14M ALL mbetet e paqartÃ«.",
                grossAnnualTurnover: "Xhiro Bruto Vjetore",
                expenseMethod: "Metoda e Shpenzimeve",
                presumedExpenses: "30% Shpenzime tÃ« Supozuara",
                actualExpenses: "Shpenzime Aktuale (Kontabilitet)",
                grossAnnualTurnoverCard: "Xhiro Bruto Vjetore",
                netAnnualIncome: "TÃ« Ardhurat Neto (Pas Detyrimeve)",
                obligationBreakdown: "Detajet e Detyrimeve",
                calculatedExpenses: "Shpenzimet e Llogaritura",
                annualContributions: "Kontributet Vjetore (27.9% mbi PagÃ«n Min.)",
                taxableProfit: "Fitimi i TatueshÃ«m",
                incomeTax: "Tatimi mbi Fitimin",
                taxRateUsed: "Shkalla e Tatimit e PÃ«rdorur",
                taxStatusUncertain: "0% Tatim (Status i paqartÃ« pas vendimit tÃ« GJK)",
                taxStatusHigh: (threshold) => `23% Tatim mbi fitimin neto mbi ${threshold}`,
                legalObligations: "Detyrimet Themelore Ligjore",
                vatObligation: "Detyrimi pÃ«r TVSH (VAT):",
                vatYes: (threshold) => `PO (Mbi ${threshold} ALL)`,
                vatNo: (threshold) => `JO (NÃ«n ${threshold} ALL)`,
                divaObligation: "Detyrimi pÃ«r DeklaratÃ«n Vjetore (DIVA):",
                divaYes: (threshold) => `PO (Mbi ${threshold})`,
                divaNo: "JO",
                foreignClients: "KlientÃ«t e Huaj:",
                foreignClientsText: "TÃ« ardhurat nga klientÃ«t e huaj janÃ« **tÃ« tatueshme** nÃ« ShqipÃ«ri. Ju duhet tÃ« lÃ«shoni faturÃ« tÃ« fiskalizuar dhe t'i pÃ«rfshini nÃ« xhiron tuaj vjetore.",
                freelancerGuide: {
                    title: "UdhÃ«zuesi Tatimor pÃ«r Freelancer (2025)",
                    intro: "PÃ«rzgjidh xhiron e pritshme dhe profilin e klientÃ«ve pÃ«r tÃ« parÃ« Ã§farÃ« kÃ«rkon ligji dhe si tÃ« planifikosh tatimin pÃ«r vitin 2025.",
                    filtersTitle: "Parametrat kryesorÃ«",
                    revenueLabel: "Xhiroja vjetore",
                    revenueCaption: "Zgjidh intervalin qÃ« i pÃ«rshtatet mÃ« mirÃ« kontratave tÃ« tua tÃ« 12 muajve tÃ« fundit.",
                    clientMixLabel: "Profili i klientÃ«ve",
                    clientMixCaption: "Sa tÃ« pÃ«rqendruara janÃ« kontratat e tua dhe nÃ« cilat tregje operon?",
                    mobileNarrativeSummary: "Shfaq rekomandimet e detajuara",
                    narrativeHeading: "Ã‡farÃ« duhet tÃ« kesh parasysh",
                    actionsHeading: "Hapat qÃ« sugjerojmÃ«",
                    warningsHeading: "Sinjale pÃ«r t'u mbajtur mend",
                    thresholds: {
                        vat: "10,000,000 ALL",
                        profit: "14,000,000 ALL"
                    },
                    revenueOptions: {
                        under5: "< 5M ALL Â· Faza e nisjes",
                        '5to10': "5Mâ€“10M ALL Â· NÃ«n pragun e TVSH-sÃ«",
                        '10to14': "10Mâ€“14M ALL Â· AfÃ«r tatimit mbi fitimin",
                        above14: "> 14M ALL Â· Tatim i plotÃ« mbi fitimin"
                    },
                    clientMixOptions: {
                        singleLocal: "1 klient vendas kryesor",
                        localPortfolio: "2-5 klientÃ« vendas tÃ« rregullt",
                        balanced: "Mix lokal & ndÃ«rkombÃ«tar",
                        global: "Kryesisht klientÃ« tÃ« huaj"
                    },
                    table: {
                        heading: "PÃ«rmbledhje e detyrimeve ligjore",
                        obligation: "Detyrimi",
                        status: "Statusi",
                        notes: "Ã‡farÃ« nÃ«nkupton"
                    },
                    statuses: {
                        required: "I detyrueshÃ«m",
                        threshold: "Prag pÃ«r t'u monitoruar",
                        recommended: "E rekomanduar",
                        monitor: "VÃ«zhgo ndryshimet",
                        caution: "Kujdes i shtuar"
                    },
                    statusDescriptions: {
                        required: "Duhet tÃ« pÃ«rmbushet menjÃ«herÃ«.",
                        threshold: "Aktivohet sapo tÃ« kalosh pragun pÃ«rkatÃ«s.",
                        recommended: "E dobishme pÃ«r tÃ« shmangur gjoba ose auditime.",
                        monitor: "Mbaj evidencÃ« dhe prit qartÃ«sime ligjore.",
                        caution: "Rrezik i mundshÃ«m qÃ« kÃ«rkon dokumentim."
                    },
                    obligationsHeading: "Detyrimet kryesore",
                    obligations: {
                        registerNipt: {
                            label: "Regjistrimi si NIPT",
                            note: "Apliko nÃ« QKB pÃ«r t'u regjistruar si profesionist i lirÃ« pÃ«rpara faturimit."
                        },
                        socialSecurity: {
                            label: "Kontributet shoqÃ«rore & shÃ«ndetÃ«sore",
                            note: "Paguaj 27.9% mbi pagÃ«n minimale ose bazÃ«n qÃ« zgjedh Ã§do muaj."
                        },
                        incomeTax: {
                            label: "Tatimi mbi fitimin",
                            note: "Tatimi mbi tÃ« ardhurat e biznesit individual ndryshon sipas fitimit neto."
                        },
                        vat: {
                            label: "TVSH (VAT)",
                            note: "Detyrim pÃ«r regjistrim pasi kalon pragun vjetor tÃ« TVSH-sÃ«."
                        },
                        diva: {
                            label: "Deklarata vjetore DIVA",
                            note: "DorÃ«zo formularin DIVA deri mÃ« 31 Mars pÃ«r tÃ« ardhurat e vitit tÃ« kaluar."
                        },
                        invoicing: {
                            label: "Fiskalizimi i faturave",
                            note: "LÃ«sho fatura elektronike pÃ«r Ã§do pagesÃ«, sipas ligjit tÃ« fiskalizimit."
                        },
                        accounting: {
                            label: "Kontabiliteti & dokumentimi",
                            note: "Mbaj evidencÃ« tÃ« shpenzimeve dhe kontratave pÃ«r tÃ« justifikuar tÃ« ardhurat."
                        }
                    },
                    dynamicNotes: {
                        incomeTax: {
                            under5: "Aktualisht fitimet deri nÃ« 14M ALL nuk tatohet, por priten udhÃ«zime tÃ« reja.",
                            '5to10': "Sigurohu qÃ« fitimi tÃ« kalkulohet drejt pasi vendimmarrja pÃ«r shkallÃ«n 0-14M ALL mund tÃ« ndryshojÃ«.",
                            '10to14': "Je nÃ« zonÃ« gri: pÃ«rgatit rezerva nÃ« rast se zbatohet tatim 15% pÃ«r kÃ«tÃ« fashÃ«.",
                            above14: "Fitimi mbi 14M tatohet me 23%; llogarit paraprakisht dhe paguaj kÃ«ste."
                        },
                        vat: {
                            under5: "Je larg pragut 10M ALL, por dokumento xhiron pÃ«r tÃ« provuar vÃ«llimin.",
                            '5to10': "Planifiko regjistrimin sapo tÃ« parashikosh kalimin e pragut prej 10M ALL.",
                            '10to14': "Duhet tÃ« regjistrohesh dhe deklarosh TVSH-nÃ« mujore brenda 15 ditÃ«ve.",
                            above14: "TVSH e detyrueshme; kontrollo kreditimin e TVSH-sÃ« pÃ«r klientÃ«t e huaj."
                        },
                        accounting: {
                            under5: "Mjafton kontabilitet i thjeshtuar ose software bazÃ«.",
                            '5to10': "PÃ«rgatit raporte mujore tÃ« shpenzimeve pÃ«r tÃ« optimizuar fitimin neto.",
                            '10to14': "KÃ«rkon ekspert kontabÃ«l pÃ«r tÃ« pÃ«rmbushur TVSH dhe raportimet mujore.",
                            above14: "Rekomandohet kontabilist i licencuar dhe bilanc vjetor i audituar."
                        }
                    },
                    clientNotes: {
                        invoicing: {
                            singleLocal: "Klienti vendor kÃ«rkon kontratÃ« shÃ«rbimi dhe raporte pune pÃ«r tÃ« shmangur 'punÃ«simin e fshehur'.",
                            localPortfolio: "Sigurohu qÃ« Ã§do klient tÃ« ketÃ« marrÃ«veshje tÃ« qartÃ« dhe fatura mujore.",
                            balanced: "PÃ«rdor valutÃ« tÃ« saktÃ« dhe shÃ«nim pÃ«r shÃ«rbimet e eksportuara pa TVSH.",
                            global: "PÃ«r klientÃ«t e huaj pÃ«rdor kode shÃ«rbimi dhe ruaj provat e eksportit."
                        },
                        accounting: {
                            singleLocal: "Dokumento pavarÃ«sinÃ« tÃ«nde (afate, fatura, pajisje personale) pÃ«r tÃ« mbrojtur statusin.",
                            localPortfolio: "Segmento tÃ« ardhurat sipas klientit pÃ«r tÃ« treguar diversifikim.",
                            balanced: "Klasifiko tÃ« ardhurat sipas vendndodhjes pÃ«r raportim statistikor.",
                            global: "Mbaj raport me kursin e kÃ«mbimit pÃ«r tÃ« mbyllur librat nÃ« ALL."
                        }
                    },
                    warnings: {
                        disguisedTitle: "Rreziku i punÃ«simit tÃ« fshehur",
                        disguisedBody: "NjÃ« klient i vetÃ«m vendas mund tÃ« interpretohet si marrÃ«dhÃ«nie pune. Mbani kontratÃ« shÃ«rbimi, orare fleksibÃ«l dhe prova tÃ« pavarÃ«sisÃ«.",
                        vatTitle: "Pragu i TVSH-sÃ«",
                        vatBody: "Pasi tÃ« kalosh 10,000,000 ALL nÃ« 12 muajt e fundit, regjistrimi nÃ« TVSH Ã«shtÃ« i detyrueshÃ«m brenda 15 ditÃ«ve.",
                        profitTitle: "Tatimi 23% mbi fitimin",
                        profitBody: "Fitimi neto mbi 14,000,000 ALL tatohet me 23%. Planifiko paraprakisht kÃ«ste tremujore dhe konsulto kontabilistin."
                    },
                    details: {
                        under5: {
                            singleLocal: {
                                title: "Startues me njÃ« klient vendas",
                                summary: "Je nÃ« fazÃ« fillestare me njÃ« kontratÃ« tÃ« vetme vendase. PavarÃ«sia ligjore Ã«shtÃ« prioritet kryesor ndÃ«rsa ndÃ«rton portofolin.",
                                actions: [
                                    "Formalizo kontratÃ«n si shÃ«rbim konsulence dhe pÃ«rcakto qartÃ« oraret fleksibÃ«l.",
                                    "Kujdesu qÃ« kontributet tÃ« paguhen Ã§do muaj pÃ«r tÃ« shmangur kamatat.",
                                    "Investo kohÃ« nÃ« gjetjen e klientÃ«ve tÃ« rinj pÃ«r tÃ« ulur riskun e varÃ«sisÃ«."
                                ]
                            },
                            localPortfolio: {
                                title: "Freelancer lokal nÃ« rritje",
                                summary: "Menaxhon disa klientÃ« vendas nÃ«n 5M ALL. Fokusohu nÃ« proceset e faturimit dhe nÃ« mbajtjen e evidencave tÃ« sakta.",
                                actions: [
                                    "Implemento njÃ« sistem tÃ« thjeshtÃ« menaxhimi faturash me fiskalizim tÃ« automatizuar.",
                                    "Ruaj shpenzimet me faturÃ« pÃ«r tÃ« justifikuar metodÃ«n e zgjedhur tÃ« zbritjes.",
                                    "Planifiko rritjen graduale tÃ« bazÃ«s sÃ« kontributeve pas vitit tÃ« parÃ«."
                                ]
                            },
                            balanced: {
                                title: "Portofol i balancuar nÃ« fazÃ« nisjeje",
                                summary: "Ke kombinim klientÃ«sh vendas e tÃ« huaj me xhiro tÃ« ulÃ«t. Regjistro qartÃ« shÃ«rbimet e eksportuara dhe menaxho valutÃ«n.",
                                actions: [
                                    "PÃ«rdor fatura nÃ« valutÃ« me shÃ«nimin 'shÃ«rbim i eksportuar pa TVSH'.",
                                    "Konverto pagesat nÃ« ALL sipas kursit zyrtar nÃ« datÃ«n e faturimit.",
                                    "Ruaj kontratat nÃ« gjuhÃ« tÃ« huaj tÃ« pÃ«rkthyera pÃ«r inspektimet fiskale."
                                ]
                            },
                            global: {
                                title: "Eksporues digjital fillestar",
                                summary: "Kryesisht klientÃ« tÃ« huaj me xhiro modeste. Fokusohu nÃ« provat e eksportit dhe nÃ« menaxhimin e kursit tÃ« kÃ«mbimit.",
                                actions: [
                                    "Arkivo vÃ«rtetimet e pagesave ndÃ«rkombÃ«tare (Swift, PayPal, Stripe).",
                                    "PÃ«rdor metoda tÃ« sakta pÃ«r pÃ«rllogaritjen e fitimit nÃ« ALL.",
                                    "Monitoro shpenzimet nÃ« valutÃ« pÃ«r tÃ« ruajtur marzhin e fitimit."
                                ]
                            }
                        },
                        '5to10': {
                            singleLocal: {
                                title: "KontratÃ« e vetme pranÃ« pragut tÃ« TVSH-sÃ«",
                                summary: "Xhiroja po afrohet me 10M ALL me njÃ« klient tÃ« vetÃ«m. Diversifikimi Ã«shtÃ« kritik pÃ«r tÃ« shmangur rrezikun e punÃ«simit tÃ« fshehur.",
                                actions: [
                                    "Negocio klauzola tÃ« qarta pÃ«r pavarÃ«sinÃ« dhe tÃ« drejtÃ«n pÃ«r tÃ« punuar me klientÃ« tÃ« tjerÃ«.",
                                    "Monitoro xhiron mujore pÃ«r tÃ« parashikuar momentin e regjistrimit nÃ« TVSH.",
                                    "Rezervo 10-15% tÃ« tÃ« ardhurave pÃ«r detyrime tatimore tÃ« paparashikuara."
                                ]
                            },
                            localPortfolio: {
                                title: "Freelancer vendor drejt zgjerimit",
                                summary: "Portofoli vendas po rritet dhe po i afrohet pragut 10M ALL. Nevojitet disiplinÃ« nÃ« faturim dhe dokumentim.",
                                actions: [
                                    "Automatizo raportimin e xhiros pÃ«r tÃ« llogaritur 12 muajt rrotullues.",
                                    "Shqyrto hapjen e llogarisÃ« bankare dedikuar biznesit pÃ«r transparencÃ«.",
                                    "PÃ«rgatis dokumentacionin pÃ«r regjistrim nÃ« TVSH (NIPT, kontrata, qarkullim)."
                                ]
                            },
                            balanced: {
                                title: "Mix klientÃ«sh me xhiro mesatare",
                                summary: "Xhiroja 5-10M ALL me klientÃ« vendas dhe tÃ« huaj kÃ«rkon menaxhim tÃ« dyfishtÃ« tÃ« fiskalizimit dhe deklarimeve.",
                                actions: [
                                    "Ndarja e faturave me dhe pa TVSH sipas destinacionit tÃ« shÃ«rbimit.",
                                    "Kontrollo marrÃ«veshjet ndÃ«rkombÃ«tare pÃ«r tÃ« shmangur tatimin nÃ« burim jashtÃ« vendit.",
                                    "PÃ«rditÃ«so politikat e Ã§mimeve pÃ«r tÃ« mbuluar kostot e ardhshme tÃ« TVSH-sÃ«."
                                ]
                            },
                            global: {
                                title: "Eksportues me ritÃ«m tÃ« qÃ«ndrueshÃ«m",
                                summary: "TÃ« ardhurat 5-10M ALL kryesisht nga jashtÃ«. Fokusohu nÃ« dokumentimin e eksportit dhe nÃ« shlyerjen e taksave nÃ« ALL.",
                                actions: [
                                    "Ruaj provat e eksportit (kontrata, korrespondencÃ«, dorÃ«zime digjitale).",
                                    "Menaxho flukset valutore me kurs mesatar mujor pÃ«r deklarime.",
                                    "Kontrollo marrÃ«veshjet tatimore pÃ«r tÃ« shmangur tatimin e dyfishtÃ«."
                                ]
                            }
                        },
                        '10to14': {
                            singleLocal: {
                                title: "KontratÃ« e madhe vendase me TVSH",
                                summary: "Kalimi i 10M ALL me njÃ« klient vendas tÃ« vetÃ«m nÃ«nkupton regjistrim TVSH dhe risk tÃ« shtuar pÃ«r ri-kategorizim si punÃ«sim.",
                                actions: [
                                    "Deklaro TVSH-nÃ« mujore dhe kÃ«rko rimbursim tÃ« inputeve tÃ« lejuara.",
                                    "Dokumento rreptÃ«sisht oraret, objektivat dhe mjetet e tua tÃ« punÃ«s.",
                                    "Sigurohu qÃ« klienti tÃ« pranojÃ« faturÃ« me TVSH dhe tÃ« paguajÃ« nÃ« kohÃ«."
                                ]
                            },
                            localPortfolio: {
                                title: "Agjenci e vogÃ«l freelance",
                                summary: "Me disa klientÃ« vendas mbi 10M ALL, duhet kontabilitet profesional dhe monitorim i fitimit neto.",
                                actions: [
                                    "Vendos politika pagese pÃ«r tÃ« menaxhuar TVSH-nÃ« dalÃ«se dhe hyrÃ«se.",
                                    "PÃ«rgatit parashikime fitimi pÃ«r tÃ« vlerÃ«suar ndikimin e tatimit tÃ« mundshÃ«m 15%.",
                                    "Implemento arkivÃ« digjitale pÃ«r kontratat dhe fletÃ«t e punÃ«s."
                                ]
                            },
                            balanced: {
                                title: "Portofol i pjekur me TVSH",
                                summary: "TÃ« ardhurat 10-14M ALL me klientÃ« miks kÃ«rkojnÃ« koordinim midis faturimit me TVSH dhe shÃ«rbimeve tÃ« eksportuara.",
                                actions: [
                                    "Segmento librat e shitjeve nÃ« faturÃ« me TVSH dhe pa TVSH.",
                                    "Kontrollo retencione tatimore jashtÃ« vendit dhe aplikimin e marrÃ«veshjeve.",
                                    "Planifiko cash-flow pÃ«r pagesat mujore tÃ« TVSH-sÃ« dhe sigurimeve."
                                ]
                            },
                            global: {
                                title: "Eksportues i avancuar",
                                summary: "Xhiroja 10-14M ALL nga jashtÃ«. TVSH nÃ« shitje nuk aplikohet, por raportimi dhe tatimi mbi fitimin kÃ«rkojnÃ« kujdes.",
                                actions: [
                                    "Deklaro TVSH-nÃ« si eksport me normÃ« 0% dhe kÃ«rko kreditimet e inputeve vendase.",
                                    "Sigurohu qÃ« fitimi tÃ« mbÃ«shtetet me shpenzime tÃ« dokumentuara.",
                                    "Mbaj kalendar tatimor pÃ«r parapagimet dhe raportimet ndÃ«rkombÃ«tare."
                                ]
                            }
                        },
                        above14: {
                            singleLocal: {
                                title: "KontratÃ« e vetme me tatim tÃ« plotÃ«",
                                summary: "Mbi 14M ALL me njÃ« klient vendas nÃ«nkupton tatim 23% dhe auditim tÃ« mundshÃ«m pÃ«r marrÃ«dhÃ«nie pune.",
                                actions: [
                                    "Paguaj kÃ«ste tremujore tÃ« tatimit mbi fitimin dhe TVSH-sÃ«.",
                                    "KÃ«rko opinion profesional mbi strukturÃ«n kontraktuale pÃ«r tÃ« shmangur ri-klasifikimin.",
                                    "Diversifiko tÃ« ardhurat pÃ«r tÃ« reduktuar riskun operacional."
                                ]
                            },
                            localPortfolio: {
                                title: "Freelancer me volum tÃ« lartÃ« vendor",
                                summary: "NjÃ« portofol i gjerÃ« vendas mbi 14M ALL kÃ«rkon sistem tÃ« plotÃ« kontabiliteti dhe kontroll tÃ« shpenzimeve.",
                                actions: [
                                    "Krijo buxhete mujore pÃ«r tÃ« monitoruar marzhin pas tatimit.",
                                    "PÃ«rditÃ«so kontratat me klauzola TVSH-je dhe penalitete pÃ«r pagesa tÃ« vonuara.",
                                    "Analizo mundÃ«sinÃ« e hapjes sÃ« njÃ« shoqÃ«rie pÃ«r avantazhe tatimore."
                                ]
                            },
                            balanced: {
                                title: "Portofol i matur ndÃ«rkombÃ«tar",
                                summary: "Mbi 14M ALL me klientÃ« vendas dhe tÃ« huaj kÃ«rkon strategji tatimore tÃ« integruar dhe kontroll tÃ« kursit tÃ« kÃ«mbimit.",
                                actions: [
                                    "PÃ«rgatis raporte tÃ« ndara pÃ«r tÃ« ardhurat e eksportit dhe ato vendase.",
                                    "Optimizoni shpenzimet e zbritshme pÃ«r tÃ« ulur bazÃ«n e tatimit 23%.",
                                    "BashkÃ«puno me kontabilist tÃ« licencuar pÃ«r mbylljen vjetore."
                                ]
                            },
                            global: {
                                title: "Eksportues premium",
                                summary: "Xhiro mbi 14M ALL kryesisht nga klientÃ« tÃ« huaj kÃ«rkon fokus nÃ« marrÃ«veshjet e tatimit tÃ« dyfishtÃ« dhe menaxhimin e riskut valutor.",
                                actions: [
                                    "Kontrollo nÃ«se vendet e klientÃ«ve aplikojnÃ« tatim nÃ« burim dhe kÃ«rko kreditim.",
                                    "Optimizoni shpenzimet nÃ« valutÃ« pÃ«r tÃ« mbrojtur fitimin neto.",
                                    "Planifiko cash-flow-in pÃ«r kÃ«stet e tatimit dhe kontributet e rritura."
                                ]
                            }
                        }
                    }
                },
                // Seksioni i Influencer (I RI)
                influencerTitle: "Kalkulatori i Detyrimeve (Influencer)",
                influencerWarning: "VÃ‹REJTJE PÃ‹R INFLUENCERÃ‹T:",
                influencerWarningText: "Trajtimi juaj fiskal Ã«shtÃ« i njÃ«jtÃ« me atÃ« tÃ« njÃ« **Profesionisti tÃ« LirÃ«**. Dallimi kryesor Ã«shtÃ« tek pagesat nÃ« natyrÃ« (barter). Rekomandohet pÃ«rdorimi i metodÃ«s sÃ« **shpenzimeve tÃ« supozuara (30%)** pÃ«r shkak tÃ« kompleksitetit tÃ« vlerÃ«simit tÃ« produkteve ose shÃ«rbimeve tÃ« marra si pagesÃ«.",
                // Info Seksioni
                infoTitle: "Si funksionon Kalkulatori?",
                infoIntro: "Ky mjet ju ndihmon tÃ« kuptoni sistemin e taksave nÃ« ShqipÃ«ri, qoftÃ« si punÃ«marrÃ«s, profesionist i lirÃ« apo influencer. MÃ« poshtÃ« gjeni njÃ« shpjegim tÃ« thjeshtÃ« tÃ« termave kryesorÃ«.",
                infoGrossNetTitle: "Paga Bruto vs. Paga Neto (PÃ«r PunÃ«marrÃ«sit)",
                infoGrossNetText: "<strong>Paga Bruto</strong> Ã«shtÃ« shuma totale pÃ«r tÃ« cilÃ«n bini dakord me punÃ«dhÃ«nÃ«sin pÃ«rpara Ã§do zbritjeje. <strong>Paga Neto</strong> (ose 'nÃ« dorÃ«') Ã«shtÃ« shuma qÃ« merrni nÃ« llogarinÃ« tuaj bankare pasi tÃ« jenÃ« mbajtur kontributet dhe tatimet.",
                infoContributionsTitle: "Kontributet ShoqÃ«rore dhe ShÃ«ndetÃ«sore",
                infoContributionsText: "KÃ«to janÃ« pagesa tÃ« detyrueshme pÃ«r tÃ« financuar pensionin tuaj dhe kujdesin shÃ«ndetÃ«sor publik. Si punonjÃ«s, ju paguani <strong>11.2%</strong> tÃ« pagÃ«s suaj (por jo mÃ« shumÃ« se paga maksimale e vlerÃ«sueshme, 176,416 ALL). PunÃ«dhÃ«nÃ«si juaj paguan <strong>16.7%</strong> shtesÃ« mbi pagÃ«n tuaj bruto. Kjo Ã«shtÃ« arsyeja pse <strong>Kostoja Totale e PunÃ«dhÃ«nÃ«sit</strong> Ã«shtÃ« mÃ« e lartÃ« se paga juaj bruto.",
                infoTapTitle: "Tatimi mbi tÃ« Ardhurat Personale (TAP)",
                infoTapText: "Ky Ã«shtÃ« tatimi progresiv mbi pagÃ«n. PÃ«r vitin 2024, paga nÃ«n 40,000 ALL/muaj nuk tatohet. Pjesa e pagÃ«s mbi 30,000 ALL deri nÃ« 200,000 ALL tatohet me <strong>13%</strong>, dhe Ã§do shumÃ« mbi 200,000 ALL tatohet me <strong>23%</strong>. Kjo pritet tÃ« ndryshojÃ« nÃ« 2025.",
                infoFreelancerTitle: "ProfesionistÃ«t e LirÃ« & InfluencerÃ«t",
                infoFreelancerText: "Si profesionist i lirÃ« apo influencer (person fizik me NIPT), ju jeni vetÃ« pÃ«rgjegjÃ«s pÃ«r pagimin e kontributeve dhe tatimeve. Ju paguani vetÃ« tÃ« dyja pjesÃ«t e kontributeve (<strong>27.9%</strong> e pagÃ«s minimale, ose mÃ« shumÃ«). Tatimi mbi fitimin neto vjetor Ã«shtÃ« aktualisht nÃ« njÃ« periudhÃ« tranzicioni ligjor (shih paralajmÃ«rimin nÃ« kalkulator).",
                // FAQ Seksioni
                faqTitle: "Pyetje tÃ« Shpeshta (FAQ)",
                faq1Title: "Sa janÃ« pushimet vjetore tÃ« paguara?",
                faq1Text: "Sipas ndryshimit tÃ« fundit tÃ« Kodit tÃ« PunÃ«s (Gusht 2024), Ã§do punÃ«marrÃ«s ka tÃ« drejtÃ«n e njÃ« minimumi prej **22 ditÃ« pune** pushim vjetor tÃ« paguar (mÃ« parÃ« ishin 4 javÃ« kalendarike).",
                faq2Title: "Ã‡farÃ« Ã«shtÃ« baza maksimale e kontributeve?",
                faq2Text: "Ã‹shtÃ« kufiri i sipÃ«rm i pagÃ«s mbi tÃ« cilin llogariten kontributet. PÃ«r vitin 2024, kjo shumÃ« Ã«shtÃ« **176,416 ALL**. NÃ«se paga juaj bruto Ã«shtÃ« 200,000 ALL, ju do tÃ« paguani kontribute vetÃ«m pÃ«r 176,416 ALL. Tatimi (TAP), megjithatÃ«, llogaritet mbi tÃ« gjithÃ« shumÃ«n bruto (200,000 ALL).",
                faq3Title: "Ã‡farÃ« po ndodh me taksÃ«n e profesionistÃ«ve tÃ« lirÃ«/influencerÃ«ve?",
                faq3Text: "NÃ« Qershor 2024, Gjykata Kushtetuese shfuqizoi shkallÃ«n 15% tÃ« tatimit mbi fitimin neto (pÃ«r tÃ« ardhura 0-14 milionÃ« ALL/vit). Shkalla 23% pÃ«r fitimin mbi 14 milionÃ« ALL mbetet nÃ« fuqi. Aktualisht, ka njÃ« boshllÃ«k ligjor dhe pritet njÃ« skemÃ« e re nga qeveria pÃ«r vitin 2025. Ky kalkulator supozon 0% tatim pÃ«r shkallÃ«n e parÃ« deri nÃ« miratimin e ligjit tÃ« ri.",
                faq4Title: "A duhet tÃ« paguaj TVSH si profesionist i lirÃ«/influencer?",
                faq4Text: "Ju duhet tÃ« regjistroheni si pÃ«rgjegjÃ«s i TVSH-sÃ« vetÃ«m nÃ«se xhiroja juaj vjetore i kalon **10,000,000 ALL**.",
                faq5Title: "A duhet tÃ« lÃ«shoj faturÃ« pÃ«r klientÃ«t e huaj?",
                faq5Text: "Po. TÃ« gjitha tÃ« ardhurat, pavarÃ«sisht nÃ«se vijnÃ« nga klientÃ« vendas apo tÃ« huaj, duhet tÃ« deklarohen dhe tÃ« fiskalizohen. Ato janÃ« pjesÃ« e xhiros suaj vjetore dhe janÃ« tÃ« tatueshme nÃ« ShqipÃ«ri.",
                faq6Title: "Si tatohen pagesat nÃ« natyrÃ« (barter) pÃ«r influencerÃ«t?", // E RE
                faq6Text: "Pagesat nÃ« natyrÃ« (p.sh., produkte, shÃ«rbime, udhÃ«time) konsiderohen **e ardhur e tatueshme**. Vlera e tyre e tregut duhet tÃ« shtohet nÃ« xhiron tuaj bruto vjetore dhe tÃ« tatohet si e ardhur normale. PÃ«r shkak tÃ« vÃ«shtirÃ«sisÃ« sÃ« vlerÃ«simit, konsultohuni me njÃ« kontabilist. PÃ«rdorimi i shpenzimeve tÃ« supozuara (30%) mund tÃ« thjeshtojÃ« llogaritjen.",
                // Links Seksioni
                newsTitle: "PÃ«rditÃ«sime zyrtare tÃ« tatimeve",
                newsSubtitle: "PÃ«rditÃ«sohuni me njoftimet mÃ« tÃ« fundit nga institucionet fiskale shqiptare.",
                newsLoading: "Duke ngarkuar pÃ«rditÃ«simet zyrtare...",
                newsError: "Nuk mundÃ«m tÃ« marrim pÃ«rditÃ«simet. Ju lutemi provoni sÃ«rish pas pak.",
                newsRetry: "Provo pÃ«rsÃ«ri",
                newsEmpty: "Aktualisht nuk ka pÃ«rditÃ«sime tÃ« reja. Rikthehuni mÃ« vonÃ«.",
                newsSourceLabel: "Burimi",
                newsPublished: "Publikuar",
                newsReadMore: "Lexo mÃ« shumÃ«",
                linksTitle: "Burime Zyrtare & Lidhje tÃ« Dobishme",
                linksDpt: "Drejtoria e PÃ«rgjithshme e Tatimeve (DPT)",
                linksQkb: "Qendra KombÃ«tare e Biznesit (QKB)",
                linksKodiPunes: "Kodi i PunÃ«s (Tekst i plotÃ«)",
                linksSigurime: "Instituti i Sigurimeve ShoqÃ«rore (ISSH)",
                // Footer
                footerCreatedBy: "Krijuar nga Kejsan Coku",
                footerCopyright: "Â© 2025. Llogaritjet mund tÃ« pÃ«rmbajnÃ« pasaktÃ«si ose tÃ« mos pasqyrojnÃ« pÃ«rditÃ«simet e fundit ligjore. Konsultohuni me njÃ« kontabilist ose kÃ«shilltar ligjor pÃ«rpara se tÃ« merrni vendime financiare.",
            },
            en: {
                // Navigation
                navEmployee: "Employee",
                navFreelancer: "Freelancer",
                navInfluencer: "Influencer", // NEW
                navFreelancerGuide: "Freelancer Tax Guide",
                navNews: "News & Updates",
                navInfo: "How does it work?",
                navFAQ: "Frequently Asked Questions (FAQ)",
                navLinks: "Official Resources",
                navContact: "Contact",
                navTools: "Tools",
                navResources: "Resources",
                // Header
                selectCurrency: "Currency",
                // General
                gross: "Gross",
                net: "Net",
                // Employee Calculator
                employeeTitle: "Employee Salary Calculator",
                tapWarning: "**2025 Warning:** The Payroll Tax (TAP) brackets will change in January 2025. This calculation uses the current 2024 rules.",
                salaryInputMode: "Input mode",
                modeGrossToNet: "Gross to Net",
                modeNetToGross: "Net to Gross",
                grossMonthlySalary: "Gross Monthly Salary",
                netMonthlySalary: "Net Monthly Salary",
                workingDays: "Working days per month",
                grossSalary: "Gross Salary",
                netSalary: "Net Salary (Take-Home)",
                employeeDeductions: "Employee Deductions (Ins. + Tax)",
                employerTotalCost: "Total Employer Cost",
                dailyGross: "Daily Gross Salary",
                dailyNet: "Daily Net Salary",
                deductionBreakdown: "Deduction & Cost Breakdown",
                employeeContributions: "1. Employee Contributions (11.2%)",
                employeeTax: "2. Payroll Income Tax (TAP)",
                employerContributionsLabel: "3. Employer Contributions (16.7%)",
                employerSocial: "Social Ins. (15.0%)",
                employerHealth: "Health Ins. (1.7%)",
                maxContributionBase: "Max. Contribution Base",
                // Freelancer Calculator
                freelancerTitle: "Freelancer Obligation Calculator",
                legislativeWarning: "LEGISLATIVE WARNING (2024-2025):",
                legislativeWarningText: "The 15% tax bracket (for net profit up to 14M ALL) was ruled **unconstitutional** in June 2024. The government is preparing a new scheme. This calculator reflects the latest data, but the 0-14M ALL tax rate remains uncertain.",
                grossAnnualTurnover: "Gross Annual Turnover",
                expenseMethod: "Expense Method",
                presumedExpenses: "30% Presumed Expenses",
                actualExpenses: "Actual Expenses (Bookkeeping)",
                grossAnnualTurnoverCard: "Gross Annual Turnover",
                netAnnualIncome: "Net Annual Income (After Obligations)",
                obligationBreakdown: "Obligation Breakdown",
                calculatedExpenses: "Calculated Expenses",
                annualContributions: "Annual Contributions (27.9% on Min. Wage)",
                taxableProfit: "Taxable Profit",
                incomeTax: "Income Tax",
                taxRateUsed: "Tax Rate Used",
                taxStatusUncertain: "0% Tax (Status unclear after court ruling)",
                taxStatusHigh: (threshold) => `23% Tax on net profit above ${threshold}`,
                legalObligations: "Core Legal Obligations",
                vatObligation: "VAT Obligation:",
                vatYes: (threshold) => `YES (Over ${threshold} ALL)`,
                vatNo: (threshold) => `NO (Under ${threshold} ALL)`,
                divaObligation: "Annual Declaration (DIVA) Obligation:",
                divaYes: (threshold) => `YES (Over ${threshold})`,
                divaNo: "NO",
                foreignClients: "Foreign Clients:",
                foreignClientsText: "Income from foreign clients is **taxable** in Albania. You must issue a fiscalized invoice and include it in your annual turnover.",
                freelancerGuide: {
                    title: "Freelancer Tax Guide (2025)",
                    intro: "Select your expected turnover and client profile to see which compliance steps apply in 2025.",
                    filtersTitle: "Key parameters",
                    revenueLabel: "Annual turnover",
                    revenueCaption: "Choose the range that best matches your last 12 months of signed work.",
                    clientMixLabel: "Client profile",
                    clientMixCaption: "How concentrated are your contracts and in which markets do you operate?",
                    mobileNarrativeSummary: "Show detailed recommendations",
                    narrativeHeading: "Key considerations",
                    actionsHeading: "Suggested actions",
                    warningsHeading: "Signals to keep in mind",
                    thresholds: {
                        vat: "10,000,000 ALL",
                        profit: "14,000,000 ALL"
                    },
                    revenueOptions: {
                        under5: "< 5M ALL Â· Early stage",
                        '5to10': "5Mâ€“10M ALL Â· Below VAT threshold",
                        '10to14': "10Mâ€“14M ALL Â· Near profit tax gate",
                        above14: "> 14M ALL Â· Full profit tax applies"
                    },
                    clientMixOptions: {
                        singleLocal: "One domestic anchor client",
                        localPortfolio: "2â€“5 recurring Albanian clients",
                        balanced: "Balanced local & international",
                        global: "Mostly foreign clients"
                    },
                    table: {
                        heading: "Compliance obligations overview",
                        obligation: "Obligation",
                        status: "Status",
                        notes: "What it means"
                    },
                    statuses: {
                        required: "Mandatory",
                        threshold: "Threshold watch",
                        recommended: "Recommended",
                        monitor: "Monitor updates",
                        caution: "Heightened caution"
                    },
                    statusDescriptions: {
                        required: "Must be satisfied immediately.",
                        threshold: "Activates as soon as you cross the relevant limit.",
                        recommended: "Helps you avoid penalties or audits.",
                        monitor: "Keep records and await regulatory clarity.",
                        caution: "Potential risk that requires extra documentation."
                    },
                    obligationsHeading: "Core obligations",
                    obligations: {
                        registerNipt: {
                            label: "NIPT registration",
                            note: "Register with the National Business Center before issuing invoices."
                        },
                        socialSecurity: {
                            label: "Social & health contributions",
                            note: "Pay 27.9% on the minimum wage or your chosen base each month."
                        },
                        incomeTax: {
                            label: "Profit tax",
                            note: "Business income tax depends on your annual net profit."
                        },
                        vat: {
                            label: "VAT",
                            note: "VAT registration becomes mandatory once you cross the statutory turnover."
                        },
                        diva: {
                            label: "Annual DIVA return",
                            note: "File the DIVA form by 31 March for the prior tax year."
                        },
                        invoicing: {
                            label: "Electronic invoicing",
                            note: "Issue electronic invoices for every payment under the e-invoicing rules."
                        },
                        accounting: {
                            label: "Accounting & record keeping",
                            note: "Maintain expense records and contracts to justify your deductions."
                        }
                    },
                    dynamicNotes: {
                        incomeTax: {
                            under5: "Net profit up to 14M ALL currently carries 0% while we await new guidance.",
                            '5to10': "Track net profit carefully; the 0â€“14M bracket could change mid-year.",
                            '10to14': "Grey zone: set aside reserves in case a 15% rate is reinstated.",
                            above14: "Net profit above 14M is taxed at 23%; schedule advance payments."
                        },
                        vat: {
                            under5: "Well below the 10M ALL VAT threshold, but document turnover to prove volume.",
                            '5to10': "Prepare the registration package as soon as forecasts show 10M ALL within 12 months.",
                            '10to14': "You must register and submit monthly VAT returns within 15 days.",
                            above14: "VAT is compulsory; monitor input credits on foreign supplier invoices."
                        },
                        accounting: {
                            under5: "Simple bookkeeping software is enough at this stage.",
                            '5to10': "Produce monthly expense summaries to defend your profit margin.",
                            '10to14': "Hire an accountant to align VAT ledgers and monthly reports.",
                            above14: "Work with a licensed accountant and prepare an annual financial statement."
                        }
                    },
                    clientNotes: {
                        invoicing: {
                            singleLocal: "Service agreements and work logs help prove you are not a disguised employee.",
                            localPortfolio: "Ensure every client signs a clear engagement and receives monthly invoices.",
                            balanced: "Use the right currency and mark exported services as VAT zero-rated.",
                            global: "Apply export service codes and store evidence of cross-border delivery."
                        },
                        accounting: {
                            singleLocal: "Document independence (schedules, invoices, your own equipment) to defend your status.",
                            localPortfolio: "Segment revenue per client to demonstrate diversification.",
                            balanced: "Classify revenue by country for statistical and tax reporting.",
                            global: "Track exchange rates used for ALL conversions when closing your books."
                        }
                    },
                    warnings: {
                        disguisedTitle: "Disguised employment risk",
                        disguisedBody: "A single domestic client may be treated as an employment relationship. Keep a service contract, flexible timelines, and proof of independence.",
                        vatTitle: "VAT threshold alert",
                        vatBody: "Crossing 10,000,000 ALL in any rolling 12 months triggers mandatory VAT registration within 15 days.",
                        profitTitle: "23% profit tax applies",
                        profitBody: "Net profit above 14,000,000 ALL is taxed at 23%. Plan quarterly installments and consult your accountant."
                    },
                    details: {
                        under5: {
                            singleLocal: {
                                title: "Starter with one domestic client",
                                summary: "You are in an early phase with a single Albanian contract. Legal independence is the priority while you build a pipeline.",
                                actions: [
                                    "Frame the contract as consultancy with clearly defined deliverables and flexible hours.",
                                    "Pay contributions every month to avoid late-payment interest.",
                                    "Invest time in prospecting to reduce reliance on one payer."
                                ]
                            },
                            localPortfolio: {
                                title: "Growing local freelancer",
                                summary: "Managing several Albanian clients under 5M ALL. Focus on invoicing discipline and tidy records.",
                                actions: [
                                    "Adopt a lightweight invoicing tool with automated e-fiscalization.",
                                    "Keep expense receipts to support your chosen deduction method.",
                                    "Plan a gradual increase of the contribution base after your first year."
                                ]
                            },
                            balanced: {
                                title: "Balanced mix in launch phase",
                                summary: "A mix of domestic and foreign clients with low turnover. Track exported services and currency conversions.",
                                actions: [
                                    "Invoice in the client currency and note 'exported service â€“ VAT 0%'.",
                                    "Convert receipts to ALL using the official rate on the invoice date.",
                                    "Store translated contracts for potential tax inspections."
                                ]
                            },
                            global: {
                                title: "Early digital exporter",
                                summary: "Mostly foreign clients at modest turnover. Emphasize export evidence and exchange-rate management.",
                                actions: [
                                    "Archive international payment proofs (SWIFT, PayPal, Stripe).",
                                    "Use accurate methods to calculate profit in ALL.",
                                    "Monitor foreign currency expenses to protect your margin."
                                ]
                            }
                        },
                        '5to10': {
                            singleLocal: {
                                title: "Single contract near VAT threshold",
                                summary: "Turnover is approaching 10M ALL with one client. Diversifying is crucial to mitigate disguised employment risk.",
                                actions: [
                                    "Negotiate clauses that confirm independence and permit work for other clients.",
                                    "Track monthly turnover to predict the VAT registration date.",
                                    "Set aside 10â€“15% of revenue for unexpected tax liabilities."
                                ]
                            },
                            localPortfolio: {
                                title: "Local freelancer scaling up",
                                summary: "Your domestic portfolio is growing toward 10M ALL. Discipline in billing and documentation is key.",
                                actions: [
                                    "Automate turnover reports to calculate the rolling 12-month figure.",
                                    "Consider a dedicated business bank account for transparency.",
                                    "Prepare the VAT registration file (NIPT, contracts, turnover evidence)."
                                ]
                            },
                            balanced: {
                                title: "Mid-range mixed portfolio",
                                summary: "Turnover of 5â€“10M ALL across domestic and foreign clients demands dual VAT and export tracking.",
                                actions: [
                                    "Separate invoices that carry VAT from zero-rated export services.",
                                    "Review foreign contracts to avoid withholding tax abroad.",
                                    "Update pricing to cover the future cost of VAT compliance."
                                ]
                            },
                            global: {
                                title: "Steady exporter",
                                summary: "Revenue of 5â€“10M ALL mainly from abroad. Focus on export documentation and converting taxes into ALL.",
                                actions: [
                                    "Keep export proofs (contracts, correspondence, digital delivery logs).",
                                    "Manage currency flows using monthly average rates for filings.",
                                    "Check double-tax treaties to avoid foreign withholding taxes."
                                ]
                            }
                        },
                        '10to14': {
                            singleLocal: {
                                title: "Large domestic contract with VAT",
                                summary: "Crossing 10M ALL with one Albanian client requires VAT registration and increases reclassification scrutiny.",
                                actions: [
                                    "File monthly VAT returns and claim input credits where allowed.",
                                    "Document timelines, deliverables, and the tools you own.",
                                    "Ensure the client accepts VAT invoices and pays on schedule."
                                ]
                            },
                            localPortfolio: {
                                title: "Boutique freelance agency",
                                summary: "Multiple domestic clients above 10M ALL need professional bookkeeping and profit monitoring.",
                                actions: [
                                    "Set payment policies to manage output and input VAT.",
                                    "Forecast net profit to gauge a potential 15% tax reinstatement.",
                                    "Implement a digital archive for contracts and work evidence."
                                ]
                            },
                            balanced: {
                                title: "Mature mixed portfolio with VAT",
                                summary: "Turnover of 10â€“14M ALL with mixed clients requires coordination between VAT invoices and exported services.",
                                actions: [
                                    "Split sales ledgers between VATable and zero-rated invoices.",
                                    "Check foreign withholding taxes and apply treaty relief where possible.",
                                    "Plan cash flow for monthly VAT and contribution payments."
                                ]
                            },
                            global: {
                                title: "Advanced exporter",
                                summary: "Turnover of 10â€“14M ALL from abroad. VAT on sales is zero, but reporting and profit tax must be airtight.",
                                actions: [
                                    "Declare exports at 0% VAT and recover eligible local input VAT.",
                                    "Support net profit with properly documented expenses.",
                                    "Maintain a tax calendar for prepayments and cross-border filings."
                                ]
                            }
                        },
                        above14: {
                            singleLocal: {
                                title: "Single domestic contract under full tax",
                                summary: "Above 14M ALL with one client triggers the 23% profit tax and likely employment audits.",
                                actions: [
                                    "Pay quarterly profit-tax and VAT installments on time.",
                                    "Seek professional advice on the contract structure to avoid reclassification.",
                                    "Diversify revenue streams to reduce operational risk."
                                ]
                            },
                            localPortfolio: {
                                title: "High-volume domestic freelancer",
                                summary: "A large Albanian client base above 14M ALL needs full accounting systems and cost control.",
                                actions: [
                                    "Create monthly budgets to monitor post-tax margins.",
                                    "Update contracts with VAT clauses and late-payment penalties.",
                                    "Assess whether incorporating could provide tax efficiencies."
                                ]
                            },
                            balanced: {
                                title: "Seasoned international portfolio",
                                summary: "Above 14M ALL across local and foreign clients demands integrated tax strategy and currency oversight.",
                                actions: [
                                    "Produce separate reports for export and domestic revenue.",
                                    "Optimize deductible expenses to lower the 23% tax base.",
                                    "Work with a licensed accountant on the year-end close."
                                ]
                            },
                            global: {
                                title: "Premium exporter",
                                summary: "Turnover above 14M ALL mainly from foreign clients calls for focus on double-tax treaties and FX risk.",
                                actions: [
                                    "Check if client countries levy withholding tax and claim credits.",
                                    "Optimize foreign-currency spending to protect net profit.",
                                    "Plan cash flow for higher tax installments and contributions."
                                ]
                            }
                        }
                    }
                },
                // Influencer Section (NEW)
                influencerTitle: "Influencer Obligation Calculator",
                influencerWarning: "NOTE FOR INFLUENCERS:",
                influencerWarningText: "Your fiscal treatment is the same as a **Free Professional**. The main difference is in-kind payments (barter). It is recommended to use the **presumed expenses (30%)** method due to the complexity of valuing products or services received as payment.",
                // Info Section
                infoTitle: "How does the Calculator work?",
                infoIntro: "This tool helps you understand the tax system in Albania, whether as an employee, freelancer, or influencer. Below is a simple explanation of the key terms.",
                infoGrossNetTitle: "Gross Salary vs. Net Salary (For Employees)",
                infoGrossNetText: "<strong>Gross Salary</strong> is the total amount agreed upon with your employer before any deductions. <strong>Net Salary</strong> (or 'take-home' pay) is the amount you receive in your bank account after contributions and taxes are withheld.",
                infoContributionsTitle: "Social and Health Contributions",
                infoContributionsText: "These are mandatory payments to fund your pension and public healthcare. As an employee, you pay <strong>11.2%</strong> of your salary (up to the maximum assessable wage, 176,416 ALL). Your employer pays an additional <strong>16.7%</strong> on top of your gross salary. This is why the <strong>Total Employer Cost</strong> is higher than your gross salary.",
                infoTapTitle: "Personal Income Tax (TAP)",
                infoTapText: "This is the progressive tax on your salary. For 2024, income below 40,000 ALL/month is not taxed. The portion of salary from 30,000 ALL to 200,000 ALL is taxed at <strong>13%</strong>, and any amount over 200,000 ALL is taxed at <strong>23%</strong>. This is expected to change in 2025.",
                infoFreelancerTitle: "Free Professionals & Influencers",
                infoFreelancerText: "As a freelancer or influencer (physical person with a NIPT), you are responsible for paying your own contributions and taxes. You pay both parts of the contributions (<strong>27.9%</strong> of the minimum wage, or more). The tax on annual net profit is currently in a legal transition period (see warning on the calculator).",
                // FAQ Section
                faqTitle: "Frequently Asked Questions (FAQ)",
                faq1Title: "How much paid annual leave do I get?",
                faq1Text: "According to the latest change in the Labor Code (August 2024), every employee is entitled to a minimum of **22 working days** of paid annual leave (it was previously 4 calendar weeks).",
                faq2Title: "What is the maximum contribution base?",
                faq2Text: "It's the upper limit of salary on which contributions are calculated. For 2024, this amount is **176,416 ALL**. If your gross salary is 200,000 ALL, you will only pay contributions on 176,416 ALL. The Income Tax (TAP), however, is calculated on the full gross amount (200,000 ALL).",
                faq3Title: "What is happening with the freelancer/influencer tax?",
                faq3Text: "In June 2024, the Constitutional Court repealed the 15% tax rate on net profit (for income 0-14 million ALL/year). The 23% rate for profit over 14 million ALL remains in effect. There is currently a legal vacuum, and a new scheme is expected from the government for 2025. This calculator assumes a 0% tax for the first bracket until the new law is passed.",
                faq4Title: "Do I have to register for VAT as a freelancer/influencer?",
                faq4Text: "You only need to register for VAT (TVSH) if your annual turnover exceeds **10,000,000 ALL**.",
                faq5Title: "Do I have to invoice foreign clients?",
                faq5Text: "Yes. All income, whether from local or foreign clients, must be declared and fiscalized. It is part of your annual turnover and is taxable in Albania.",
                faq6Title: "How are in-kind (barter) payments taxed for influencers?", // NEW
                faq6Text: "In-kind payments (e.g., products, services, trips) are considered **taxable income**. Their market value must be added to your gross annual turnover and taxed as normal income. Due to the difficulty of valuation, consult an accountant. Using presumed expenses (30%) can simplify the calculation.",
                // Links Section
                newsTitle: "Official fiscal updates",
                newsSubtitle: "Stay on top of the latest announcements from Albanian tax institutions.",
                newsLoading: "Loading official updates...",
                newsError: "We couldnâ€™t fetch the latest updates. Please try again shortly.",
                newsRetry: "Try again",
                newsEmpty: "No new updates are available at the moment. Please check back soon.",
                newsSourceLabel: "Source",
                newsPublished: "Published",
                newsReadMore: "Read more",
                linksTitle: "Official Resources & Useful Links",
                linksDpt: "General Directorate of Taxes (DPT)",
                linksQkb: "National Business Center (QKB)",
                linksKodiPunes: "Labor Code (Full Text)",
                linksSigurime: "Social Insurance Institute (ISSH)",
                // Footer
                footerCreatedBy: "Created by Kejsan Coku",
                footerCopyright: "Â© 2025. Calculations may include inaccuracies or omit recent legal updates. Seek advice from a certified accountant or legal professional before making financial decisions.",
            },
            it: {
                // Navigazione
                navEmployee: "Dipendente",
                navFreelancer: "Freelancer",
                navInfluencer: "Influencer", // NUOVO
                navFreelancerGuide: "Guida Fiscale Freelancer",
                navNews: "Notizie & Aggiornamenti",
                navInfo: "Come funziona?",
                navFAQ: "Domande Frequenti (FAQ)",
                navLinks: "Risorse Ufficiali",
                navContact: "Contatti",
                navTools: "Strumenti",
                navResources: "Risorse",
                // Header
                selectCurrency: "Valuta",
                // Generale
                gross: "Lordo",
                net: "Netto",
                // Calcolatore Dipendente
                employeeTitle: "Calcolatore Stipendio Dipendente",
                tapWarning: "**Avviso 2025:** Le aliquote dell'imposta sul reddito (TAP) cambieranno a gennaio 2025. Questo calcolo utilizza le regole attuali del 2024.",
                salaryInputMode: "ModalitÃ  di input",
                modeGrossToNet: "Lordo a Netto",
                modeNetToGross: "Netto a Lordo",
                grossMonthlySalary: "Stipendio Lordo Mensile",
                netMonthlySalary: "Stipendio Netto Mensile",
                workingDays: "Giorni lavorativi al mese",
                grossSalary: "Stipendio Lordo",
                netSalary: "Stipendio Netto (In tasca)",
                employeeDeductions: "Trattenute Dipendente (Contr. + Tasse)",
                employerTotalCost: "Costo Totale Datore di Lavoro",
                dailyGross: "Stipendio Lordo Giornaliero",
                dailyNet: "Stipendio Netto Giornaliero",
                deductionBreakdown: "Dettaglio Trattenute e Costi",
                employeeContributions: "1. Contributi Dipendente (11.2%)",
                employeeTax: "2. Imposta sul Reddito (TAP)",
                employerContributionsLabel: "3. Contributi Datore di Lavoro (16.7%)",
                employerSocial: "Contr. Sociali (15.0%)",
                employerHealth: "Contr. Sanitari (1.7%)",
                maxContributionBase: "Base Contributiva Massima",
                // Calcolatore Freelancer
                freelancerTitle: "Calcolatore Obblighi (Libero Professionista)",
                legislativeWarning: "AVVISO LEGISLATIVO (2024-2025):",
                legislativeWarningText: "L'aliquota fiscale del 15% (per profitti netti fino a 14M ALL) Ã¨ stata dichiarata **incostituzionale** a giugno 2024. Il governo sta preparando un nuovo schema. Questo calcolatore riflette i dati piÃ¹ recenti, ma l'aliquota 0-14M ALL rimane incerta.",
                grossAnnualTurnover: "Fatturato Lordo Annuo",
                expenseMethod: "Metodo di Spesa",
                presumedExpenses: "30% Spese Forfettarie",
                actualExpenses: "Spese Effettive (ContabilitÃ )",
                grossAnnualTurnoverCard: "Fatturato Lordo Annuo",
                netAnnualIncome: "Reddito Netto (Dopo Obblighi)",
                obligationBreakdown: "Dettaglio Obblighi",
                calculatedExpenses: "Spese Calcolate",
                annualContributions: "Contributi Annuali (27.9% su Sal. Min.)",
                taxableProfit: "Utile Imponibile",
                incomeTax: "Imposta sul Reddito",
                taxRateUsed: "Aliquota Fiscale Utilizzata",
                taxStatusUncertain: "0% Tasse (Status incerto post-sentenza)",
                taxStatusHigh: (threshold) => `23% Tasse sull'utile netto sopra ${threshold}`,
                legalObligations: "Obblighi Legali Fondamentali",
                vatObligation: "Obbligo IVA (TVSH):",
                vatYes: (threshold) => `SÃŒ (Sopra ${threshold} ALL)`,
                vatNo: (threshold) => `NO (Sotto ${threshold} ALL)`,
                divaObligation: "Obbligo Dichiarazione Annuale (DIVA):",
                divaYes: (threshold) => `SÃŒ (Sopra ${threshold})`,
                divaNo: "NO",
                foreignClients: "Clienti Esteri:",
                foreignClientsText: "I redditi da clienti esteri sono **tassabili** in Albania. Ãˆ necessario emettere una fattura fiscalizzata e includerla nel fatturato annuale.",
                freelancerGuide: {
                    title: "Guida Fiscale Freelancer (2025)",
                    intro: "Seleziona il fatturato atteso e il profilo clienti per vedere quali adempimenti valgono nel 2025.",
                    filtersTitle: "Parametri chiave",
                    revenueLabel: "Fatturato annuo",
                    revenueCaption: "Scegli l'intervallo che riflette meglio gli ultimi 12 mesi di contratti.",
                    clientMixLabel: "Profilo clienti",
                    clientMixCaption: "Quanto sono concentrate le tue commesse e su quali mercati lavori?",
                    mobileNarrativeSummary: "Mostra le raccomandazioni dettagliate",
                    narrativeHeading: "Cosa considerare",
                    actionsHeading: "Azioni consigliate",
                    warningsHeading: "Segnali da ricordare",
                    thresholds: {
                        vat: "10,000,000 ALL",
                        profit: "14,000,000 ALL"
                    },
                    revenueOptions: {
                        under5: "< 5M ALL Â· Fase iniziale",
                        '5to10': "5Mâ€“10M ALL Â· Sotto soglia IVA",
                        '10to14': "10Mâ€“14M ALL Â· Vicino all'imposta sugli utili",
                        above14: "> 14M ALL Â· Aliquota piena sugli utili"
                    },
                    clientMixOptions: {
                        singleLocal: "Un solo cliente domestico principale",
                        localPortfolio: "2â€“5 clienti albanesi ricorrenti",
                        balanced: "Mix locale e internazionale",
                        global: "Prevalenza clienti esteri"
                    },
                    table: {
                        heading: "Panoramica obblighi fiscali",
                        obligation: "Obbligo",
                        status: "Stato",
                        notes: "Significato"
                    },
                    statuses: {
                        required: "Obbligatorio",
                        threshold: "Soglia da monitorare",
                        recommended: "Raccomandato",
                        monitor: "Monitorare aggiornamenti",
                        caution: "Attenzione elevata"
                    },
                    statusDescriptions: {
                        required: "Da adempiere immediatamente.",
                        threshold: "Si attiva appena superi il limite previsto.",
                        recommended: "Aiuta a evitare sanzioni o verifiche.",
                        monitor: "Conserva la documentazione in attesa di chiarimenti.",
                        caution: "Rischio potenziale che richiede ulteriore documentazione."
                    },
                    obligationsHeading: "Obblighi principali",
                    obligations: {
                        registerNipt: {
                            label: "Registrazione NIPT",
                            note: "Registrati presso il Centro Nazionale delle Imprese prima di emettere fatture."
                        },
                        socialSecurity: {
                            label: "Contributi previdenziali e sanitari",
                            note: "Versa il 27,9% sul salario minimo o sulla base scelta ogni mese."
                        },
                        incomeTax: {
                            label: "Imposta sugli utili",
                            note: "L'imposta sul reddito d'impresa dipende dall'utile netto annuale."
                        },
                        vat: {
                            label: "IVA",
                            note: "L'iscrizione IVA diventa obbligatoria una volta superata la soglia di fatturato."
                        },
                        diva: {
                            label: "Dichiarazione annuale DIVA",
                            note: "Presenta il modello DIVA entro il 31 marzo per l'anno precedente."
                        },
                        invoicing: {
                            label: "Fatturazione elettronica",
                            note: "Emetti fatture elettroniche per ogni pagamento secondo le regole di fiscalizzazione."
                        },
                        accounting: {
                            label: "ContabilitÃ  e archiviazione",
                            note: "Conserva spese e contratti per giustificare le deduzioni."
                        }
                    },
                    dynamicNotes: {
                        incomeTax: {
                            under5: "Attualmente l'utile fino a 14M ALL Ã¨ al 0%, in attesa di nuove istruzioni.",
                            '5to10': "Monitora attentamente l'utile: la fascia 0â€“14M ALL potrebbe cambiare in corso d'anno.",
                            '10to14': "Zona grigia: accantona riserve nel caso torni l'aliquota del 15%.",
                            above14: "L'utile sopra 14M Ã¨ tassato al 23%; pianifica i versamenti in acconto."
                        },
                        vat: {
                            under5: "Ben al di sotto della soglia IVA di 10M ALL, ma documenta il fatturato per provarne il volume.",
                            '5to10': "Prepara la pratica di iscrizione non appena prevedi di superare 10M ALL in 12 mesi.",
                            '10to14': "Devi iscriverti e presentare le liquidazioni IVA mensili entro 15 giorni.",
                            above14: "L'IVA Ã¨ obbligatoria; controlla i crediti IVA sugli acquisti esteri."
                        },
                        accounting: {
                            under5: "Ãˆ sufficiente una contabilitÃ  semplificata o un software base.",
                            '5to10': "Produci riepiloghi mensili delle spese per difendere il margine.",
                            '10to14': "Coinvolgi un commercialista per allineare registri IVA e comunicazioni mensili.",
                            above14: "Lavora con un commercialista abilitato e prepara un bilancio annuale."
                        }
                    },
                    clientNotes: {
                        invoicing: {
                            singleLocal: "Contratti di servizio e report di lavoro aiutano a dimostrare che non sei un dipendente mascherato.",
                            localPortfolio: "Assicurati che ogni cliente firmi un incarico chiaro e riceva fattura mensile.",
                            balanced: "Usa la valuta corretta e indica i servizi esportati come IVA zero.",
                            global: "Applica i codici per servizi esportati e conserva le prove della consegna transfrontaliera."
                        },
                        accounting: {
                            singleLocal: "Documenta l'autonomia (scadenze, fatture, attrezzatura propria) per difendere lo status.",
                            localPortfolio: "Segmenta i ricavi per cliente per dimostrare la diversificazione.",
                            balanced: "Classifica i ricavi per paese ai fini statistici e fiscali.",
                            global: "Traccia i cambi utilizzati per convertire in ALL a fine esercizio."
                        }
                    },
                    warnings: {
                        disguisedTitle: "Rischio di lavoro subordinato",
                        disguisedBody: "Un unico cliente domestico puÃ² essere considerato rapporto di lavoro. Mantieni contratto di servizio, scadenze flessibili e prove di autonomia.",
                        vatTitle: "Allerta soglia IVA",
                        vatBody: "Il superamento di 10,000,000 ALL in 12 mesi mobili impone l'iscrizione IVA entro 15 giorni.",
                        profitTitle: "Aliquota 23% sugli utili",
                        profitBody: "L'utile netto oltre 14,000,000 ALL Ã¨ tassato al 23%. Pianifica acconti trimestrali e consulta il commercialista."
                    },
                    details: {
                        under5: {
                            singleLocal: {
                                title: "Avvio con un cliente domestico",
                                summary: "Sei nella fase iniziale con un solo contratto albanese. L'autonomia legale Ã¨ prioritaria mentre costruisci il portafoglio.",
                                actions: [
                                    "Imposta il contratto come consulenza con deliverable chiari e orari flessibili.",
                                    "Versa i contributi ogni mese per evitare interessi di mora.",
                                    "Dedica tempo alla ricerca di nuovi clienti per ridurre la dipendenza da uno solo."
                                ]
                            },
                            localPortfolio: {
                                title: "Freelancer locale in crescita",
                                summary: "Gestisci diversi clienti albanesi sotto 5M ALL. Concentrati su fatturazione e archiviazione ordinata.",
                                actions: [
                                    "Adotta un gestionale leggero con fiscalizzazione automatica.",
                                    "Conserva le spese con fattura per sostenere il metodo di deduzione scelto.",
                                    "Pianifica un aumento graduale della base contributiva dopo il primo anno."
                                ]
                            },
                            balanced: {
                                title: "Mix bilanciato in fase di lancio",
                                summary: "Un mix di clienti locali e esteri con fatturato contenuto. Traccia i servizi esportati e le conversioni di valuta.",
                                actions: [
                                    "Fattura nella valuta del cliente indicando 'servizio esportato â€“ IVA 0%'.",
                                    "Converti gli incassi in ALL con il cambio ufficiale della data fattura.",
                                    "Archivia contratti tradotti per eventuali verifiche fiscali."
                                ]
                            },
                            global: {
                                title: "Esportatore digitale alle prime armi",
                                summary: "Prevalenza clienti esteri con fatturato modesto. Cura le prove di export e la gestione dei cambi.",
                                actions: [
                                    "Archivia le prove di pagamento internazionali (SWIFT, PayPal, Stripe).",
                                    "Usa metodi accurati per calcolare l'utile in ALL.",
                                    "Monitora le spese in valuta per proteggere il margine."
                                ]
                            }
                        },
                        '5to10': {
                            singleLocal: {
                                title: "Contratto unico vicino alla soglia IVA",
                                summary: "Il fatturato si avvicina a 10M ALL con un solo cliente. Diversificare Ã¨ essenziale per evitare il rischio di lavoro subordinato.",
                                actions: [
                                    "Negozia clausole che confermino l'autonomia e permettano altri incarichi.",
                                    "Controlla il fatturato mensile per prevedere la data di iscrizione IVA.",
                                    "Accantona il 10â€“15% dei ricavi per eventuali imposte impreviste."
                                ]
                            },
                            localPortfolio: {
                                title: "Freelancer locale in espansione",
                                summary: "Il portafoglio domestico cresce verso 10M ALL. Servono disciplina in fatturazione e documentazione.",
                                actions: [
                                    "Automatizza i report di fatturato per calcolare i 12 mesi mobili.",
                                    "Valuta un conto bancario dedicato all'attivitÃ  per maggiore trasparenza.",
                                    "Prepara la pratica IVA (NIPT, contratti, evidenze di fatturato)."
                                ]
                            },
                            balanced: {
                                title: "Portafoglio misto di fascia media",
                                summary: "Fatturato 5â€“10M ALL tra clienti locali ed esteri richiede doppio monitoraggio IVA/export.",
                                actions: [
                                    "Separa le fatture con IVA da quelle a zero per export.",
                                    "Rivedi i contratti esteri per evitare ritenute alla fonte all'estero.",
                                    "Aggiorna il listino per coprire i futuri costi di compliance IVA."
                                ]
                            },
                            global: {
                                title: "Esportatore costante",
                                summary: "Ricavi 5â€“10M ALL soprattutto dall'estero. Concentrati su prove d'export e conversione fiscale in ALL.",
                                actions: [
                                    "Conserva prove di export (contratti, corrispondenza, log di consegna digitale).",
                                    "Gestisci i flussi valutari usando cambi medi mensili per le dichiarazioni.",
                                    "Verifica le convenzioni contro la doppia imposizione per evitare ritenute estere."
                                ]
                            }
                        },
                        '10to14': {
                            singleLocal: {
                                title: "Grande contratto domestico con IVA",
                                summary: "Superare 10M ALL con un solo cliente albanese richiede iscrizione IVA e aumenta il rischio di riclassificazione.",
                                actions: [
                                    "Presenta le liquidazioni IVA mensili e recupera i crediti ammessi.",
                                    "Documenta tempistiche, deliverable e strumenti di tua proprietÃ .",
                                    "Assicurati che il cliente accetti fatture con IVA e paghi puntualmente."
                                ]
                            },
                            localPortfolio: {
                                title: "Mini agenzia freelance",
                                summary: "PiÃ¹ clienti domestici oltre 10M ALL richiedono contabilitÃ  professionale e controllo dell'utile.",
                                actions: [
                                    "Definisci politiche di incasso per gestire IVA a debito e a credito.",
                                    "Prevedi l'utile netto per valutare un possibile ritorno dell'aliquota 15%.",
                                    "Implementa un archivio digitale per contratti e report di lavoro."
                                ]
                            },
                            balanced: {
                                title: "Portafoglio maturo con IVA",
                                summary: "Fatturato 10â€“14M ALL misto richiede coordinamento tra fatture IVA e servizi esportati.",
                                actions: [
                                    "Dividi i registri vendite tra operazioni imponibili e a zero.",
                                    "Controlla le ritenute estere e applica eventuali convenzioni.",
                                    "Pianifica il cash flow per IVA mensile e contributi."
                                ]
                            },
                            global: {
                                title: "Esportatore avanzato",
                                summary: "Fatturato 10â€“14M ALL dall'estero. Le vendite sono a IVA zero ma reportistica e imposta sugli utili devono essere impeccabili.",
                                actions: [
                                    "Dichiara gli export a IVA 0% e recupera l'IVA sugli acquisti locali ammessi.",
                                    "Sostieni l'utile netto con spese documentate in modo rigoroso.",
                                    "Mantieni un calendario fiscale per acconti e adempimenti transfrontalieri."
                                ]
                            }
                        },
                        above14: {
                            singleLocal: {
                                title: "Contratto domestico con tassazione piena",
                                summary: "Oltre 14M ALL con un solo cliente attiva l'aliquota 23% e probabili verifiche sul rapporto di lavoro.",
                                actions: [
                                    "Versa puntualmente acconti trimestrali di imposta sugli utili e IVA.",
                                    "Richiedi consulenza professionale sulla struttura contrattuale per evitare riclassificazioni.",
                                    "Diversifica le entrate per ridurre il rischio operativo."
                                ]
                            },
                            localPortfolio: {
                                title: "Freelancer domestico ad alto volume",
                                summary: "Un ampio portafoglio albanese sopra 14M ALL necessita di sistemi contabili completi e controllo dei costi.",
                                actions: [
                                    "Predisponi budget mensili per monitorare il margine post imposte.",
                                    "Aggiorna i contratti con clausole IVA e penali per ritardi.",
                                    "Valuta se aprire una societÃ  puÃ² offrire vantaggi fiscali."
                                ]
                            },
                            balanced: {
                                title: "Portafoglio internazionale maturo",
                                summary: "Oltre 14M ALL tra clienti locali ed esteri richiede strategia fiscale integrata e gestione delle valute.",
                                actions: [
                                    "Produci report separati per ricavi export e domestici.",
                                    "Ottimizza le spese deducibili per ridurre la base imponibile al 23%.",
                                    "Collabora con un commercialista abilitato per la chiusura annuale."
                                ]
                            },
                            global: {
                                title: "Esportatore premium",
                                summary: "Fatturato oltre 14M ALL prevalentemente estero impone attenzione alle convenzioni contro la doppia imposizione e al rischio cambio.",
                                actions: [
                                    "Verifica eventuali ritenute nei paesi dei clienti e richiedi i crediti d'imposta.",
                                    "Ottimizza le spese in valuta per proteggere l'utile netto.",
                                    "Pianifica il cash flow per acconti e contributi piÃ¹ elevati."
                                ]
                            }
                        }
                    }
                },
                // Sezione Influencer (NUOVO)
                influencerTitle: "Calcolatore Obblighi (Influencer)",
                influencerWarning: "NOTA PER INFLUENCER:",
                influencerWarningText: "Il tuo trattamento fiscale Ã¨ identico a quello di un **Libero Professionista**. La differenza principale sono i pagamenti in natura (barter). Si raccomanda di utilizzare il metodo delle **spese forfettarie (30%)** a causa della complessitÃ  nella valutazione dei prodotti o servizi ricevuti come pagamento.",
                // Info Sezione
                infoTitle: "Come funziona il Calcolatore?",
                infoIntro: "Questo strumento ti aiuta a capire il sistema fiscale albanese, sia come dipendente, libero professionista o influencer. Di seguito una semplice spiegazione dei termini chiave.",
                infoGrossNetTitle: "Stipendio Lordo vs. Stipendio Netto (Per Dipendenti)",
                infoGrossNetText: "Lo <strong>Stipendio Lordo</strong> Ã¨ l'importo totale concordato con il datore di lavoro prima di qualsiasi detrazione. Lo <strong>Stipendio Netto</strong> (o 'in tasca') Ã¨ l'importo che ricevi sul tuo conto bancario dopo che sono stati trattenuti contributi e tasse.",
                infoContributionsTitle: "Contributi Sociali e Sanitari",
                infoContributionsText: "Questi sono pagamenti obbligatori per finanziare la tua pensione e l'assistenza sanitaria pubblica. Come dipendente, paghi l'<strong>11.2%</strong> del tuo stipendio (fino al massimale imponibile di 176,416 ALL). Il tuo datore di lavoro paga un ulteriore <strong>16.7%</strong> in aggiunta al tuo stipendio lordo. Questo Ã¨ il motivo per cui il <strong>Costo Totale del Datore di Lavoro</strong> Ã¨ superiore al tuo stipendio lordo.",
                infoTapTitle: "Imposta sul Reddito delle Persone Fisiche (TAP)",
                infoTapText: "Questa Ã¨ l'imposta progressiva sul tuo stipendio. Per il 2024, il reddito inferiore a 40,000 ALL/mese non Ã¨ tassato. La porzione di stipendio da 30,000 ALL a 200,000 ALL Ã¨ tassata al <strong>13%</strong>, e qualsiasi importo superiore a 200,000 ALL Ã¨ tassato al <strong>23%</strong>. Si prevede che questo cambi nel 2025.",
                infoFreelancerTitle: "Liberi Professionisti & Influencer",
                infoFreelancerText: "Come libero professionista o influencer (persona fisica con NIPT), sei responsabile del pagamento dei tuoi contributi e tasse. Paghi entrambe le parti dei contributi (<strong>27.9%</strong> del salario minimo, o piÃ¹). L'imposta sul profitto netto annuale Ã¨ attualmente in un periodo di transizione legale (vedi avviso sul calcolatore).",
                // FAQ Sezione
                faqTitle: "Domande Frequenti (FAQ)",
                faq1Title: "Quanti giorni di ferie annuali pagate mi spettano?",
                faq1Text: "Secondo l'ultima modifica al Codice del Lavoro (Agosto 2024), ogni dipendente ha diritto a un minimo di **22 giorni lavorativi** di ferie annuali pagate (in precedenza erano 4 settimane di calendario).",
                faq2Title: "Cos'Ã¨ la base contributiva massima?",
                faq2Text: "Ãˆ il limite superiore dello stipendio su cui vengono calcolati i contributi. Per il 2024, questo importo Ã¨ **176,416 ALL**. Se il tuo stipendio lordo Ã¨ 200,000 ALL, pagherai i contributi solo su 176,416 ALL. L'Imposta sul Reddito (TAP), tuttavia, Ã¨ calcolata sull'intero importo lordo (200,000 ALL).",
                faq3Title: "Cosa sta succedendo con la tassa per i liberi professionisti/influencer?",
                faq3Text: "Nel giugno 2024, la Corte Costituzionale ha abrogato l'aliquota fiscale del 15% sull'utile netto (per redditi 0-14 milioni ALL/anno). L'aliquota del 23% per profitti superiori a 14 milioni ALL rimane in vigore. Attualmente c'Ã¨ un vuoto legislativo e si attende un nuovo schema dal governo per il 2025. Questo calcolatore assume un'imposta dello 0% per la prima fascia fino all'approvazione della nuova legge.",
                faq4Title: "Devo registrarmi per l'IVA (TVSH) come libero professionista/influencer?",
                faq4Text: "Devi registrarti ai fini IVA solo se il tuo fatturato annuo supera i **10,000,000 ALL**.",
                faq5Title: "Devo fatturare ai clienti stranieri?",
                faq5Text: "SÃ¬. Tutti i redditi, sia da clienti locali che stranieri, devono essere dichiarati e fiscalizzati. Fanno parte del tuo fatturato annuo e sono tassabili in Albania.",
                faq6Title: "Come vengono tassati i pagamenti in natura (barter) per gli influencer?", // NUOVO
                faq6Text: "I pagamenti in natura (es. prodotti, servizi, viaggi) sono considerati **reddito imponibile**. Il loro valore di mercato deve essere aggiunto al tuo fatturato lordo annuo e tassato come reddito normale. A causa della difficoltÃ  di valutazione, consulta un commercialista. L'utilizzo delle spese forfettarie (30%) puÃ² semplificare il calcolo.",
                // Links Sezione
                newsTitle: "Aggiornamenti fiscali ufficiali",
                newsSubtitle: "Rimani aggiornato con gli ultimi annunci degli enti fiscali albanesi.",
                newsLoading: "Caricamento degli aggiornamenti ufficiali...",
                newsError: "Impossibile recuperare gli aggiornamenti. Riprova tra poco.",
                newsRetry: "Riprova",
                newsEmpty: "Al momento non ci sono nuovi aggiornamenti. Controlla piÃ¹ tardi.",
                newsSourceLabel: "Fonte",
                newsPublished: "Pubblicato",
                newsReadMore: "Scopri di piÃ¹",
                linksTitle: "Risorse Ufficiali e Link Utili",
                linksDpt: "Direzione Generale delle Tasse (DPT)",
                linksQkb: "Centro Nazionale delle Imprese (QKB)",
                linksKodiPunes: "Codice del Lavoro (Testo completo)",
                linksSigurime: "Istituto delle Assicurazioni Sociali (ISSH)",
                // Footer
                footerCreatedBy: "Creato da Kejsan Coku",
                footerCopyright: "Â© 2025. I calcoli possono contenere imprecisioni o non riflettere gli ultimi aggiornamenti normativi. Confrontati con un consulente fiscale o legale prima di prendere decisioni finanziarie.",
            }
        };
        const NEWS_SOURCES = [
            {
                id: 'tatime-wordpress',
                endpoint: 'https://www.tatime.gov.al/wp-json/wp/v2/posts?per_page=6&_fields=id,link,title.rendered,modified',
                baseUrl: 'https://www.tatime.gov.al',
                hostLabel: 'tatime.gov.al',
                parser: async (response) => {
                    const payload = await response.json();
                    if (!Array.isArray(payload)) return [];
                    return payload.map(entry => ({
                        id: entry.id ?? entry.link,
                        title: entry.title?.rendered ?? entry.title ?? '',
                        link: entry.link,
                        updatedAt: entry.modified ?? entry.date,
                        source: 'tatime.gov.al',
                    }));
                },
            },
            {
                id: 'tatime-open-data',
                endpoint: 'https://www.tatime.gov.al/c/657/open-data',
                baseUrl: 'https://www.tatime.gov.al',
                hostLabel: 'tatime.gov.al',
                parser: async (response) => {
                    const markup = await response.text();
                    return parseOpenDataMarkup(markup, 'https://www.tatime.gov.al');
                },
            },
            {
                id: 'lajmi9-rssing',
                endpoint: 'https://lajmi9.rssing.com/chan-51245418/all_p9.html',
                baseUrl: 'https://lajmi9.rssing.com',
                hostLabel: 'lajmi9.rssing.com',
                parser: async (response) => {
                    const markup = await response.text();
                    return parseGenericNewsMarkup(markup, {
                        baseUrl: 'https://lajmi9.rssing.com',
                        hostLabel: 'lajmi9.rssing.com',
                        minimumTitleLength: 20,
                    });
                },
            },
        ];
        const NEWS_CACHE_DURATION = 15 * 60 * 1000; // 15 minuta
        const newsCache = {
            timestamp: 0,
            data: null,
            promise: null,
            lastSource: null,
        };


        // --- DATA CONSTANTS (PÃ«rditÃ«suar me normat e PunÃ«dhÃ«nÃ«sit) ---

        const CORE_CONSTANTS = {
            PagaMinimale: 40000,
            PagaMaksimale: 176416,
            ShkallaSigSocEmployee: 0.095, // 9.5%
            ShkallaSigShendetEmployee: 0.017, // 1.7%
            TotalEmployeeContributionRate: 0.112, // 11.2%
            
            ShkallaSigSocEmployer: 0.15, // 15%
            ShkallaSigShendetEmployer: 0.017, // 1.7%
            TotalEmployerContributionRate: 0.167, // 16.7%

            TotalSelfEmployedRate: 0.279, // 11.2% + 16.7%
            PresumedExpenseRate: 0.30, // 30% pÃ«r freelancerÃ«t
            IncomeThresholdDIVA: 1200000,
            VatThreshold: 10000000,
        };

        // Kllapat e TAP 2024
        const TAP_BRACKETS_2024 = [
            { min: 0, max: 40000, rate: 0, deduction: 0, fixedTax: 0 },
            { min: 40001, max: 200000, rate: 0.13, deduction: 30000, fixedTax: 0 },
            { min: 200001, max: Infinity, rate: 0.23, deduction: 200000, fixedTax: 22100 }
        ];

        // Normat e Tatimit pÃ«r ProfesionistÃ«t e LirÃ«
        const FREE_PROF_TAX_RATES = {
            AnnualThreshold1: 14000000,
            RateHigh: 0.23,
            RateLow: 0.15, // E shpallur jokushtetuese nÃ« Qershor 2024
        };

        // --- FUNKSIONET NDIHMÃ‹SE ---

        // Formaton numrin si monedhÃ« ALL pa presje dhjetore
        const formatALL = (value) => {
            return new Intl.NumberFormat('sq-AL', {
                style: 'currency',
                currency: 'ALL',
                minimumFractionDigits: 0,
                maximumFractionDigits: 0,
            }).format(value);
        };

        // Formaton monedhÃ«n bazuar nÃ« zgjedhjen e pÃ«rdoruesit
        const formatCurrency = (value, currency, rates) => {
            if (value === null || value === undefined) value = 0;
            const isALL = currency === 'ALL';
            const rate = rates[currency] || 1;
            const convertedValue = isALL ? value : value / rate;

            return new Intl.NumberFormat(isALL ? 'sq-AL' : (currency === 'USD' ? 'en-US' : 'de-DE'), {
                style: 'currency',
                currency: currency,
                minimumFractionDigits: 2,
                maximumFractionDigits: 2,
            }).format(convertedValue);
        };

        const decodeHtmlEntities = (value) => {
            if (!value) return '';
            const textarea = document.createElement('textarea');
            textarea.innerHTML = value;
            return textarea.value;
        };

        const sanitizeNewsTitle = (value) => {
            if (!value) return '';
            return decodeHtmlEntities(String(value))
                .replace(/<[^>]*>/g, '')
                .replace(/\s+/g, ' ')
                .trim();
        };

        const ensureAbsoluteUrl = (maybeRelative, baseUrl) => {
            if (!maybeRelative) return '';
            try {
                return new URL(maybeRelative, baseUrl || window.location.origin).toString();
            } catch {
                return '';
            }
        };

        const normalizeNewsTimestamp = (value) => {
            if (!value) return null;
            if (value instanceof Date) {
                return value.toISOString();
            }
            if (typeof value === 'number' && Number.isFinite(value)) {
                return new Date(value).toISOString();
            }
            const stringValue = String(value).trim();
            if (!stringValue) return null;
            if (/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}/.test(stringValue) || /^\d{4}-\d{2}-\d{2}$/.test(stringValue)) {
                return stringValue;
            }
            const parsed = Date.parse(stringValue);
            if (Number.isNaN(parsed)) return null;
            return new Date(parsed).toISOString();
        };

        const extractHostName = (value) => {
            try {
                return new URL(value).hostname.replace(/^www\./, '');
            } catch {
                return '';
            }
        };

        const parseHtmlDocument = (markup) => {
            if (!markup) return null;
            try {
                if (typeof DOMParser !== 'undefined') {
                    return new DOMParser().parseFromString(markup, 'text/html');
                }
                const template = document.createElement('template');
                template.innerHTML = markup;
                return template.content;
            } catch (error) {
                console.warn('Failed to parse HTML markup for news feed', error);
                return null;
            }
        };

        const parseOpenDataMarkup = (markup, baseUrl) => {
            const documentRoot = parseHtmlDocument(markup);
            if (!documentRoot) return [];

            const items = [];
            const seen = new Set();
            const candidateSelectors = ['article', '.e-loop-item', '.elementor-post', '.jeg_post', '.post', '.news-item', 'li'];
            const candidates = candidateSelectors.flatMap(selector => Array.from(documentRoot.querySelectorAll?.(selector) || []));

            const tryAppendItem = (anchorNode, contextNode) => {
                if (!anchorNode) return;
                const link = ensureAbsoluteUrl(anchorNode.getAttribute('href'), baseUrl);
                if (!link || seen.has(link)) return;
                const title = sanitizeNewsTitle(anchorNode.textContent || contextNode?.textContent || '');
                if (!title || title.length < 8) return;

                const timeNode = contextNode?.querySelector?.('time');
                const timestamp = normalizeNewsTimestamp(timeNode?.getAttribute?.('datetime') || timeNode?.textContent || null);

                items.push({
                    id: link,
                    title,
                    link,
                    updatedAt: timestamp,
                    source: 'tatime.gov.al',
                });
                seen.add(link);
            };

            candidates.forEach(node => {
                if (items.length >= 8) return;
                const anchorNode = node.querySelector?.('a[href]') || node;
                tryAppendItem(anchorNode, node);
            });

            if (items.length < 4) {
                const anchors = Array.from(documentRoot.querySelectorAll?.('a[href*="tatime.gov.al"]') || []);
                anchors.forEach(anchor => {
                    if (items.length >= 8) return;
                    tryAppendItem(anchor, anchor.closest?.('article, .e-loop-item, .elementor-post, .jeg_post, .post, .news-item, li'));
                });
            }

            return items.slice(0, 6);
        };

        const parseGenericNewsMarkup = (markup, { baseUrl, hostLabel, minimumTitleLength = 10 } = {}) => {
            const documentRoot = parseHtmlDocument(markup);
            if (!documentRoot) return [];

            const items = [];
            const seen = new Set();
            const anchors = Array.from(documentRoot.querySelectorAll?.('a[href]') || []);

            anchors.forEach(anchor => {
                if (items.length >= 6) return;
                const link = ensureAbsoluteUrl(anchor.getAttribute('href'), baseUrl);
                if (!link || seen.has(link)) return;
                if (baseUrl && !link.startsWith(baseUrl)) return;

                const title = sanitizeNewsTitle(anchor.textContent || '');
                if (!title || title.length < minimumTitleLength) return;

                items.push({
                    id: link,
                    title,
                    link,
                    updatedAt: null,
                    source: hostLabel || extractHostName(link),
                });
                seen.add(link);
            });

            return items;
        };

        const standardizeNewsItems = (items, { baseUrl, fallbackSource } = {}) => {
            if (!Array.isArray(items)) return [];
            const seen = new Set();
            const normalized = [];

            items.forEach((item, index) => {
                if (!item) return;
                const title = sanitizeNewsTitle(item.title || '');
                const link = ensureAbsoluteUrl(item.link || item.url, baseUrl);
                if (!title || !link) return;

                const id = item.id || `${link}-${index}`;
                if (seen.has(id)) return;
                seen.add(id);

                normalized.push({
                    id,
                    title,
                    link,
                    updatedAt: normalizeNewsTimestamp(item.updatedAt || item.published || item.pubDate || item.date),
                    source: item.source || fallbackSource || '',
                });
            });

            normalized.sort((a, b) => {
                const timeA = a.updatedAt ? Date.parse(a.updatedAt) : 0;
                const timeB = b.updatedAt ? Date.parse(b.updatedAt) : 0;
                return timeB - timeA;
            });

            return normalized.slice(0, 6);
        };

        const fetchNewsUpdates = async ({ forceRefresh = false } = {}) => {
            if (forceRefresh) {
                newsCache.timestamp = 0;
                newsCache.data = null;
                newsCache.lastSource = null;
            }

            const now = Date.now();

            if (!forceRefresh && newsCache.data && (now - newsCache.timestamp) < NEWS_CACHE_DURATION) {
                return newsCache.data;
            }

            if (newsCache.promise) {
                return newsCache.promise;
            }

            const request = (async () => {
                let lastError = null;

                for (const source of NEWS_SOURCES) {
                    try {
                        const response = await fetch(source.endpoint, {
                            mode: 'cors',
                            credentials: 'omit',
                            cache: 'no-store',
                            headers: {
                                'Accept': 'application/json, text/html;q=0.9',
                            },
                        });

                        if (!response.ok) {
                            throw new Error(`Failed to load updates from ${source.id} (HTTP ${response.status})`);
                        }

                        const rawItems = await source.parser(response);
                        const normalized = standardizeNewsItems(rawItems, {
                            baseUrl: source.baseUrl,
                            fallbackSource: source.hostLabel || rawItems?.[0]?.source,
                        });

                        if (normalized.length) {
                            newsCache.data = normalized;
                            newsCache.timestamp = Date.now();
                            newsCache.lastSource = source.id;
                            return normalized;
                        }
                    } catch (error) {
                        lastError = error;
                        console.warn('News source failed', source.id, error);
                        continue;
                    }
                }

                throw lastError || new Error('Failed to load official updates');
            })().finally(() => {
                newsCache.promise = null;
            });

            newsCache.promise = request;
            return request;
        };

        // --- LOGJIKA KRYESORE E LLOGARITJES ---

        // Llogaritjet pÃ«r PunÃ«marrÃ«sin
        const calculateEmployeeTax = (grossMonthlySalary) => {
            if (grossMonthlySalary < CORE_CONSTANTS.PagaMinimale) {
                grossMonthlySalary = CORE_CONSTANTS.PagaMinimale;
            }

            // 1. PÃ«rcakto bazÃ«n e kontributeve
            const contributionBase = Math.min(grossMonthlySalary, CORE_CONSTANTS.PagaMaksimale);
            
            // 2. Kontributet e PunonjÃ«sit
            const employeeSocial = contributionBase * CORE_CONSTANTS.ShkallaSigSocEmployee;
            const employeeHealth = contributionBase * CORE_CONSTANTS.ShkallaSigShendetEmployee;
            const totalEmployeeContributions = employeeSocial + employeeHealth;

            // 3. Kontributet e PunÃ«dhÃ«nÃ«sit
            const employerSocial = contributionBase * CORE_CONSTANTS.ShkallaSigSocEmployer;
            const employerHealth = contributionBase * CORE_CONSTANTS.ShkallaSigShendetEmployer;
            const totalEmployerContributions = employerSocial + employerHealth;

            // 4. Tatimi mbi tÃ« Ardhurat (TAP)
            let taxAmount = 0;
            
            if (grossMonthlySalary > 200000) {
                taxAmount = TAP_BRACKETS_2024[2].fixedTax + (grossMonthlySalary - TAP_BRACKETS_2024[2].deduction) * TAP_BRACKETS_2024[2].rate;
            } else if (grossMonthlySalary > 40000) {
                taxAmount = (grossMonthlySalary - TAP_BRACKETS_2024[1].deduction) * TAP_BRACKETS_2024[1].rate;
            }
            
            taxAmount = Math.max(0, taxAmount);

            // 5. Paga Neto & Kostot Totale
            const totalEmployeeDeductions = totalEmployeeContributions + taxAmount;
            const netSalary = grossMonthlySalary - totalEmployeeDeductions;
            const totalEmployerCost = grossMonthlySalary + totalEmployerContributions;

            return {
                grossSalary: grossMonthlySalary,
                netSalary,
                employeeSocial,
                employeeHealth,
                totalEmployeeContributions,
                taxAmount,
                totalEmployeeDeductions,
                employerSocial,
                employerHealth,
                totalEmployerContributions,
                totalEmployerCost,
                contributionBase,
            };
        };

        const solveGrossFromNet = (targetNetSalary) => {
            const minimumCalculation = calculateEmployeeTax(CORE_CONSTANTS.PagaMinimale);

            if (targetNetSalary <= minimumCalculation.netSalary) {
                return { grossSalary: minimumCalculation.grossSalary, calculation: minimumCalculation };
            }

            let low = CORE_CONSTANTS.PagaMinimale;
            let high = Math.max(targetNetSalary, CORE_CONSTANTS.PagaMinimale * 1.5);
            let highCalculation = calculateEmployeeTax(high);
            let iterations = 0;

            while (highCalculation.netSalary < targetNetSalary && iterations < 60) {
                low = high;
                high *= 2;
                highCalculation = calculateEmployeeTax(high);
                iterations += 1;
            }

            let resultCalculation = highCalculation;

            for (let i = 0; i < 80; i++) {
                const mid = (low + high) / 2;
                const midCalculation = calculateEmployeeTax(mid);
                if (Math.abs(midCalculation.netSalary - targetNetSalary) <= 0.5) {
                    resultCalculation = midCalculation;
                    break;
                }

                if (midCalculation.netSalary >= targetNetSalary) {
                    resultCalculation = midCalculation;
                    high = mid;
                } else {
                    low = mid;
                }
            }

            return { grossSalary: resultCalculation.grossSalary, calculation: resultCalculation };
        };

        // Llogaritjet pÃ«r Profesionistin e LirÃ«
        const calculateFreeProfTax = (grossAnnualTurnover, expenseMethod, actualExpenses = 0) => {
            // 1. Llogarit shpenzimet e zbritshme
            let deductibleExpenses;
            let profitBeforeSocial;

            if (expenseMethod === 'presumed') {
                deductibleExpenses = grossAnnualTurnover * CORE_CONSTANTS.PresumedExpenseRate;
            } else { 
                deductibleExpenses = actualExpenses;
            }
            profitBeforeSocial = grossAnnualTurnover - deductibleExpenses;


            // 2. Kontributet ShoqÃ«rore & ShÃ«ndetÃ«sore (TÃ« vetÃ«punÃ«suarit)
            const annualMinWageContributions = (CORE_CONSTANTS.PagaMinimale * CORE_CONSTANTS.TotalSelfEmployedRate) * 12;
            
            // 3. Fitimi i TatueshÃ«m
            const taxableProfit = Math.max(0, profitBeforeSocial - annualMinWageContributions);

            // 4. Tatimi mbi Fitimin
            let taxAmount = 0;
            let isUncertain = false;
            let taxRateLabel = "0%";

            if (taxableProfit > FREE_PROF_TAX_RATES.AnnualThreshold1) {
                const amountOverThreshold = taxableProfit - FREE_PROF_TAX_RATES.AnnualThreshold1;
                // Llogaritja POST-vendimit tÃ« GJK (supozon 0% pÃ«r shkallÃ«n 0-14M)
                taxAmount = amountOverThreshold * FREE_PROF_TAX_RATES.RateHigh;
                isUncertain = true; 
                taxRateLabel = `0% + 23% mbi ${formatALL(FREE_PROF_TAX_RATES.AnnualThreshold1)}`;
            } else if (taxableProfit > 0) {
                // Kjo Ã«shtÃ« kllapa 0-14M ALL e shpallur jokushtetuese.
                taxAmount = 0;
                isUncertain = true;
                taxRateLabel = `0% (Status i paqartÃ«)`;
            }

            // 5. TÃ« Ardhurat Neto Vjetore
            const netAnnualIncome = profitBeforeSocial - annualMinWageContributions - taxAmount;
            
            const requiresDIVA = grossAnnualTurnover > CORE_CONSTANTS.IncomeThresholdDIVA;
            const requiresVAT = grossAnnualTurnover > CORE_CONSTANTS.VatThreshold;

            return {
                grossAnnualTurnover,
                deductibleExpenses,
                annualMinWageContributions,
                taxableProfit,
                taxAmount,
                netAnnualIncome,
                requiresDIVA,
                requiresVAT,
                isUncertain,
                taxRateLabel,
            };
        };


        // --- KOMPONENTÃ‹T UI ---

        const Header = ({ lang, setLang, currency, setCurrency, t }) => {
            return (
                <header className="bg-brand-navy text-white shadow-md p-4 sticky top-0 z-20">
                    <div className="max-w-7xl mx-auto flex justify-between items-center">
                        {/* Logo/Brandi */}
                        <div className="flex items-center space-x-3">
                            <div className="bg-brand-cyan p-2 rounded-lg">
                                <IconCalculator />
                            </div>
                            <span className="text-xl font-bold hidden sm:block">LlogaritÃ«si.al</span>
                        </div>
                        
                        {/* Kontrollet */}
                        <div className="flex items-center space-x-4">
                            <CurrencySelector currency={currency} setCurrency={setCurrency} t={t} />
                            <LanguageSelector lang={lang} setLang={setLang} />
                        </div>
                    </div>
                </header>
            );
        };

        const LanguageSelector = ({ lang, setLang }) => {
            const languages = [
                { code: 'sq', flag: 'ðŸ‡¦ðŸ‡±' },
                { code: 'en', flag: 'ðŸ‡¬ðŸ‡§' },
                { code: 'it', flag: 'ðŸ‡®ðŸ‡¹' },
            ];
            return (
                <div className="flex space-x-1 bg-white/10 p-1 rounded-lg">
                    {languages.map(l => (
                        <button
                            key={l.code}
                            onClick={() => setLang(l.code)}
                            className={`px-2 py-1 sm:px-3 sm:py-1.5 rounded-md text-sm font-semibold flex items-center transition-all duration-200 ${
                                lang === l.code
                                    ? 'bg-brand-white text-brand-navy shadow'
                                    : 'text-white/80 hover:bg-white/20'
                            }`}
                        >
                            <span className="mr-0 sm:mr-2">{l.flag}</span>
                            <span className="hidden sm:block">{l.code.toUpperCase()}</span>
                        </button>
                    ))}
                </div>
            );
        };

        const CurrencySelector = ({ currency, setCurrency, t }) => {
            const currencies = ['ALL', 'EUR', 'USD'];
            return (
                <div>
                    <label htmlFor="currency" className="sr-only">{t.selectCurrency}</label>
                    <select
                        id="currency"
                        value={currency}
                        onChange={(e) => setCurrency(e.target.value)}
                        className="bg-white/10 text-white border-none p-2.5 rounded-lg text-sm font-semibold focus:ring-2 focus:ring-brand-cyan"
                    >
                        {currencies.map(c => (
                            <option key={c} value={c} className="text-black">{c}</option>
                        ))}
                    </select>
                </div>
            );
        };

        const Sidebar = ({ activePage, setActivePage, t }) => {
            const navItems = [
                { id: 'employee', label: t.navEmployee, icon: IconUser },
                { id: 'freelancer', label: t.navFreelancer, icon: IconBriefcase },
                { id: 'influencer', label: t.navInfluencer, icon: IconCamera },
                { id: 'freelancer-guide', label: t.navFreelancerGuide, icon: IconSettings },
            ];
            
            const infoItems = [
                { id: 'news', label: t.navNews, icon: IconNewspaper },
                { id: 'info', label: t.navInfo, icon: IconInfo },
                { id: 'faq', label: t.navFAQ, icon: IconHelp },
                { id: 'links', label: t.navLinks, icon: IconLink },
                { id: 'contact', label: t.navContact, icon: IconMail },
            ];
            
            const NavButton = ({ item, isActive, onClick }) => (
                 <button
                    onClick={onClick}
                    className={`flex items-center w-full space-x-3 p-3 rounded-lg transition-all duration-200 ${
                        isActive 
                        ? 'bg-brand-cyan text-white shadow-lg' 
                        : 'text-gray-700 hover:bg-gray-200 hover:text-brand-navy'
                    }`}
                >
                    <item.icon className={`w-6 h-6 ${isActive ? 'text-white' : 'text-brand-cyan'}`} />
                    <span className="font-semibold">{item.label}</span>
                </button>
            );

            return (
                 <aside className="w-full lg:w-72 bg-brand-white p-6 flex-shrink-0 lg:sticky lg:top-[72px] lg:self-start lg:max-h-[calc(100vh-72px)] lg:overflow-y-auto">
                    <nav className="flex-grow">
                        <h3 className="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3">{t.navTools}</h3>
                        <ul className="space-y-2">
                            {navItems.map(item => (
                                <li key={item.id}>
                                    <NavButton 
                                        item={item} 
                                        isActive={activePage === item.id} 
                                        onClick={() => setActivePage(item.id)} 
                                    />
                                </li>
                            ))}
                        </ul>
                        
                        <h3 className="text-xs font-semibold text-gray-500 uppercase tracking-wider mt-8 mb-3">{t.navResources}</h3>
                         <ul className="space-y-2">
                            {infoItems.map(item => (
                                <li key={item.id}>
                                     <NavButton 
                                        item={item} 
                                        isActive={activePage === item.id} 
                                        onClick={() => setActivePage(item.id)} 
                                    />
                                </li>
                            ))}
                        </ul>
                    </nav>
                </aside>
            );
        };

        const Footer = ({ t }) => (
            <footer className="bg-gray-800 text-gray-400 p-6 mt-auto"> {/* Mt-auto e shtyn poshtÃ« */}
                <div className="max-w-7xl mx-auto flex flex-col gap-3 md:flex-row md:items-start md:justify-between text-sm">
                    <p className="text-center leading-relaxed md:text-left md:max-w-4xl">{t.footerCopyright}</p>
                    <p className="text-center md:text-right">
                        {t.footerCreatedBy} - <a
                            href="https://kejsan-coku.netlify.app/"
                            target="_blank"
                            rel="noopener noreferrer"
                            className="font-semibold text-brand-cyan hover:underline"
                        >
                            kejsan-coku.netlify.app
                        </a>
                    </p>
                </div>
            </footer>
        );

        const ResultCard = ({ title, value, currency, rates, isNet = false }) => (
            <div className={`p-5 rounded-xl shadow-lg ${isNet ? 'bg-brand-cyan' : 'bg-brand-navy'} text-white`}>
                <div className="text-sm font-medium opacity-90">{title}</div>
                <div className={`text-3xl font-bold mt-1`}>
                    {formatCurrency(value, currency, rates)}
                </div>
            </div>
        );

        const SectionTitle = ({ icon: Icon, title }) => (
            <h2 className="text-2xl font-bold text-brand-navy mb-6 flex items-center">
                <Icon className="w-7 h-7 mr-3 text-brand-cyan" />
                {title}
            </h2>
        );

        const InfoAlert = ({ title, children, type = 'info' }) => {
            let colors = {
                info: {
                    bg: 'bg-blue-50',
                    border: 'border-blue-400',
                    icon: 'text-blue-600',
                    IconComp: IconInfo
                },
                warning: {
                    bg: 'bg-yellow-50',
                    border: 'border-yellow-400',
                    icon: 'text-yellow-600',
                    IconComp: IconAlertTriangle
                },
                danger: { // PÃ«rdorur pÃ«r paralajmÃ«rimin e Influencer
                    bg: 'bg-brand-red/10',
                    border: 'border-brand-red',
                    icon: 'text-brand-red',
                    IconComp: IconAlertTriangle
                }
            }[type];

            return (
                <div className={`p-4 mb-6 rounded-xl border-l-4 ${colors.border} ${colors.bg}`}>
                    <div className="flex">
                        <div className="flex-shrink-0">
                            <colors.IconComp className={`w-5 h-5 ${colors.icon}`} />
                        </div>
                        <div className="ml-3">
                            <p className="font-bold text-gray-800">{title}</p>
                            <div className="text-sm mt-1 text-gray-700" dangerouslySetInnerHTML={{ __html: children }} />
                        </div>
                    </div>
                </div>
            );
        };

        const InputGroup = ({ label, value, onChange, placeholder, currency }) => (
            <div className="mb-5">
                <label className="block text-sm font-medium text-gray-700 mb-1.5">
                    {label}
                </label>
                <div className="relative rounded-lg shadow-sm">
                    <input
                        type="number"
                        min="0"
                        step="100"
                        value={value}
                        onChange={onChange}
                        placeholder={placeholder}
                        className="w-full pl-4 pr-16 py-3 border border-gray-300 rounded-lg focus:ring-brand-cyan focus:border-brand-cyan text-xl"
                    />
                    <div className="absolute inset-y-0 right-0 pr-4 flex items-center pointer-events-none">
                        <span className="text-gray-500 sm:text-base font-semibold">{currency}</span>
                    </div>
                </div>
            </div>
        );

        // --- LLOGARITÃ‹SI I PUNONJÃ‹SIT ---

        const EmployeeCalculator = ({ t, currency, rates }) => {
            const [inputMode, setInputMode] = useState('gross');
            const [inputValue, setInputValue] = useState(74010);
            const [workingDays, setWorkingDays] = useState(22);
            const [showAlert, setShowAlert] = useState(true);

            const rate = useMemo(() => rates[currency] || 1, [rates, currency]);

            const baseAmountALL = useMemo(() => {
                const numValue = parseFloat(inputValue);
                if (isNaN(numValue) || numValue < 0) return 0;
                return numValue * rate;
            }, [inputValue, rate]);

            const displayValue = inputValue === 0 ? '' : inputValue;

            const handleSalaryChange = (e) => {
                const value = e.target.value;
                setInputValue(value === '' ? 0 : parseFloat(value));
            };

            const convertFromALLForInput = useCallback((valueALL) => {
                const converted = valueALL / rate;
                if (currency === 'ALL') {
                    return Math.round(converted);
                }
                return parseFloat(converted.toFixed(2));
            }, [currency, rate]);

            const handleModeChange = useCallback((mode) => {
                if (mode === inputMode) return;

                const currentALL = baseAmountALL;

                if (mode === 'net') {
                    const currentCalculation = calculateEmployeeTax(currentALL);
                    setInputValue(convertFromALLForInput(currentCalculation.netSalary));
                } else {
                    const { grossSalary } = solveGrossFromNet(currentALL);
                    setInputValue(convertFromALLForInput(grossSalary));
                }

                setInputMode(mode);
            }, [inputMode, baseAmountALL, convertFromALLForInput]);

            const handleDaysChange = (e) => {
                const value = parseInt(e.target.value, 10);
                setWorkingDays(isNaN(value) || value < 1 ? 1 : value);
            };

            const calculation = useMemo(() => {
                if (inputMode === 'gross') {
                    return calculateEmployeeTax(baseAmountALL);
                }

                return solveGrossFromNet(baseAmountALL).calculation;
            }, [inputMode, baseAmountALL]);

            const dailyGross = calculation.grossSalary / workingDays;
            const dailyNet = calculation.netSalary / workingDays;

            return (
                <div className="bg-white p-6 rounded-xl shadow-lg">
                    <SectionTitle icon={IconUser} title={t.employeeTitle} />

                    {showAlert && (
                        <div className="mb-6 p-4 rounded-xl bg-brand-red/10 border border-brand-red text-brand-red flex justify-between items-start">
                            <p className="text-sm font-medium flex items-center">
                                <IconAlertTriangle className="w-5 h-5 mr-2 flex-shrink-0" />
                                <span dangerouslySetInnerHTML={{ __html: t.tapWarning }} />
                            </p>
                            <button onClick={() => setShowAlert(false)} className="text-brand-red hover:opacity-75 ml-2">
                                <IconX className="w-5 h-5" />
                            </button>
                        </div>
                    )}
                    
                    <div className="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4 mb-4">
                        <span className="text-sm font-semibold text-gray-700">{t.salaryInputMode}</span>
                        <div className="inline-flex bg-gray-100 p-1 rounded-lg">
                            <button
                                type="button"
                                onClick={() => handleModeChange('gross')}
                                className={`px-3 py-1.5 text-sm font-semibold rounded-md transition-colors ${
                                    inputMode === 'gross'
                                        ? 'bg-brand-cyan text-white shadow'
                                        : 'text-gray-600 hover:text-brand-navy'
                                }`}
                            >
                                {t.modeGrossToNet}
                            </button>
                            <button
                                type="button"
                                onClick={() => handleModeChange('net')}
                                className={`ml-1 px-3 py-1.5 text-sm font-semibold rounded-md transition-colors ${
                                    inputMode === 'net'
                                        ? 'bg-brand-cyan text-white shadow'
                                        : 'text-gray-600 hover:text-brand-navy'
                                }`}
                            >
                                {t.modeNetToGross}
                            </button>
                        </div>
                    </div>

                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <InputGroup
                            label={inputMode === 'gross' ? t.grossMonthlySalary : t.netMonthlySalary}
                            value={displayValue}
                            onChange={handleSalaryChange}
                            placeholder="P.sh. 74010"
                            currency={currency}
                        />
                        <div className="mb-5">
                            <label className="block text-sm font-medium text-gray-700 mb-1.5">
                                {t.workingDays}
                            </label>
                            <input
                                type="number"
                                min="1"
                                max="31"
                                value={workingDays}
                                onChange={handleDaysChange}
                                className="w-full pl-4 py-3 border border-gray-300 rounded-lg focus:ring-brand-cyan focus:border-brand-cyan text-xl"
                            />
                        </div>
                    </div>

                    <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5 my-8">
                        <ResultCard title={t.grossSalary} value={calculation.grossSalary} currency={currency} rates={rates} />
                        <ResultCard title={t.netSalary} value={calculation.netSalary} currency={currency} rates={rates} isNet={true} />
                        <ResultCard title={t.employerTotalCost} value={calculation.totalEmployerCost} currency={currency} rates={rates} />
                    </div>

                    <h3 className="text-xl font-bold text-brand-navy mb-4">{t.deductionBreakdown}</h3>
                    <div className="space-y-6">
                        {/* Ndarja Ditore */}
                        <div className="p-5 border rounded-xl shadow-sm bg-gray-50">
                            <h4 className="font-semibold text-lg text-gray-800 flex items-center mb-3">Paga Ditore (Bazuar nÃ« {workingDays} ditÃ«)</h4>
                            <div className="space-y-2">
                                <DetailRow label={t.dailyGross} value={dailyGross} currency={currency} rates={rates} />
                                <DetailRow label={t.dailyNet} value={dailyNet} currency={currency} rates={rates} />
                            </div>
                        </div>

                        {/* Ana e PunonjÃ«sit */}
                        <div className="p-5 border rounded-xl shadow-sm bg-gray-50">
                            <h4 className="font-semibold text-lg text-gray-800 flex items-center mb-3"><IconUser className="w-5 h-5 mr-2" />PunonjÃ«si</h4>
                            <DetailRow label={t.employeeContributions} value={calculation.totalEmployeeContributions} currency={currency} rates={rates} isHeader={true}/>
                            <DetailRow label={t.employeeTax} value={calculation.taxAmount} currency={currency} rates={rates} isHeader={true}/>
                            <div className="border-t pt-3 mt-3">
                                <DetailRow label={t.employeeDeductions} value={calculation.totalEmployeeDeductions} currency={currency} rates={rates} isTotal={true}/>
                            </div>
                        </div>
                        
                        {/* Ana e PunÃ«dhÃ«nÃ«sit */}
                        <div className="p-5 border rounded-xl shadow-sm bg-gray-50">
                             <h4 className="font-semibold text-lg text-gray-800 flex items-center mb-3"><IconUsers className="w-5 h-5 mr-2" />PunÃ«dhÃ«nÃ«si</h4>
                            <DetailRow label={t.employerContributionsLabel} value={calculation.totalEmployerContributions} currency={currency} rates={rates} isHeader={true}/>
                            <div className="pl-4 text-sm space-y-1 mt-2">
                                <DetailRow label={t.employerSocial} value={calculation.employerSocial} currency={currency} rates={rates} />
                                <DetailRow label={t.employerHealth} value={calculation.employerHealth} currency={currency} rates={rates} />
                            </div>
                             <div className="border-t pt-3 mt-3">
                                <DetailRow label={t.employerTotalCost} value={calculation.totalEmployerCost} currency={currency} rates={rates} isTotal={true}/>
                            </div>
                        </div>

                        <div className="border-t pt-4 mt-4 text-center">
                            <DetailRow label={t.maxContributionBase} value={CORE_CONSTANTS.PagaMaksimale} currency={currency} rates={rates} isConstant={true} />
                        </div>
                    </div>
                </div>
            );
        };

        // --- LLOGARITÃ‹SI I FREELANCER (DHE INFLUENCER) ---
        // PÃ«rdorim njÃ« komponent tÃ« vetÃ«m tÃ« parametrizuar pÃ«r tÃ« shmangur pÃ«rsÃ«ritjen e kodit

        const FreeProfCalculator = ({ t, currency, rates, isInfluencer = false }) => {
            const [inputValue, setInputValue] = useState(0);
            const [expenseMethod, setExpenseMethod] = useState('presumed');
            const [actualExpensesInput, setActualExpensesInput] = useState(0);
            
             useEffect(() => {
                if(inputValue === 0) {
                    const initialALL = 5000000;
                     // PÃ«rditÃ«so inputin bazuar nÃ« monedhÃ«n e re, duke ruajtur vlerÃ«n 5M ALL
                    setInputValue(initialALL / (rates[currency] || 1));
                }
            }, [rates, currency]);

            // GjithmonÃ« konverto inputin nÃ« ALL pÃ«r llogaritje
            const grossTurnoverALL = useMemo(() => {
                const numValue = parseFloat(inputValue);
                if (isNaN(numValue) || numValue < 0) return 0;
                return numValue * (rates[currency] || 1);
            }, [inputValue, currency, rates]);
            
            const actualExpensesALL = useMemo(() => {
                const numValue = parseFloat(actualExpensesInput);
                if (isNaN(numValue) || numValue < 0) return 0;
                return numValue * (rates[currency] || 1);
            }, [actualExpensesInput, currency, rates]);

            const handleTurnoverChange = (e) => {
                const value = e.target.value;
                setInputValue(value === '' ? 0 : parseFloat(value));
            };
            
            const handleExpenseChange = (e) => {
                const value = e.target.value;
                setActualExpensesInput(value === '' ? 0 : parseFloat(value));
            };

            const calculation = useMemo(
                () => calculateFreeProfTax(grossTurnoverALL, expenseMethod, actualExpensesALL),
                [grossTurnoverALL, expenseMethod, actualExpensesALL]
            );

            let taxStatusText = calculation.taxRateLabel;
            let taxStatusClass = "bg-yellow-100 text-yellow-800";
            if (calculation.taxableProfit > FREE_PROF_TAX_RATES.AnnualThreshold1) {
                taxStatusClass = "bg-brand-red/10 text-brand-red";
            } else if (calculation.isUncertain) {
                taxStatusClass = "bg-yellow-100 text-yellow-800";
            } else {
                taxStatusClass = "bg-green-100 text-green-800";
            }
            
            const turnoverDisplayValue = inputValue === 0 ? '' : inputValue;
            const expenseDisplayValue = actualExpensesInput === 0 ? '' : actualExpensesInput;

            return (
                <div className="bg-white p-6 rounded-xl shadow-lg">
                    <SectionTitle 
                        icon={isInfluencer ? IconCamera : IconBriefcase} 
                        title={isInfluencer ? t.influencerTitle : t.freelancerTitle} 
                    />

                    {isInfluencer ? (
                         <InfoAlert title={t.influencerWarning} type="danger">
                            {t.influencerWarningText}
                        </InfoAlert>
                    ) : (
                         <InfoAlert title={t.legislativeWarning} type="warning">
                            {t.legislativeWarningText}
                        </InfoAlert>
                    )}

                    <InputGroup
                        label={t.grossAnnualTurnover}
                        value={turnoverDisplayValue}
                        onChange={handleTurnoverChange}
                        placeholder="P.sh. 5000000"
                        currency={currency}
                    />

                    <h3 className="text-xl font-bold text-brand-navy mb-4">{t.expenseMethod}</h3>
                    <div className="flex space-x-4 mb-4">
                        <button
                            onClick={() => setExpenseMethod('presumed')}
                            className={`flex-1 py-3 rounded-lg font-semibold transition-colors ${
                                expenseMethod === 'presumed'
                                    ? 'bg-brand-cyan text-white shadow-md'
                                    : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                            }`}
                        >
                            {t.presumedExpenses}
                        </button>
                        <button
                            onClick={() => setExpenseMethod('actual')}
                            className={`flex-1 py-3 rounded-lg font-semibold transition-colors ${
                                expenseMethod === 'actual'
                                    ? 'bg-brand-cyan text-white shadow-md'
                                    : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                            }`}
                        >
                            {t.actualExpenses}
                        </button>
                    </div>
                    
                    {expenseMethod === 'actual' && (
                        <InputGroup
                            label="Shpenzimet Aktuale tÃ« Zbritshme (Vjetore)"
                            value={expenseDisplayValue}
                            onChange={handleExpenseChange}
                            placeholder="Fut shpenzimet totale"
                            currency={currency}
                        />
                    )}
                    
                    <div className="grid grid-cols-1 sm:grid-cols-2 gap-5 my-8">
                        <ResultCard title={t.grossAnnualTurnoverCard} value={calculation.grossAnnualTurnover} currency={currency} rates={rates} />
                        <ResultCard title={t.netAnnualIncome} value={calculation.netAnnualIncome} currency={currency} rates={rates} isNet={true} />
                    </div>

                    <h3 className="text-xl font-bold text-brand-navy mb-4">{t.obligationBreakdown}</h3>
                    <div className="p-5 border rounded-xl shadow-sm bg-gray-50 space-y-3">
                        <DetailRow 
                            label={`${t.calculatedExpenses} (${expenseMethod === 'presumed' ? '30%' : 'Manuale'})`} 
                            value={calculation.deductibleExpenses} 
                            currency={currency} rates={rates} isHeader={true}
                        />
                        <DetailRow label={t.annualContributions} value={calculation.annualMinWageContributions} currency={currency} rates={rates} isHeader={true} />
                        <DetailRow label={t.taxableProfit} value={calculation.taxableProfit} currency={currency} rates={rates} isHeader={true} />
                        <DetailRow label={t.incomeTax} value={calculation.taxAmount} currency={currency} rates={rates} isHeader={true} isTotal={true}/>
                        
                        <div className="mt-4 pt-4 border-t border-dashed">
                            <div className="flex justify-between items-center text-sm sm:text-base font-bold">
                                <span>{t.taxRateUsed}</span>
                                <span className={`px-2 py-1 rounded-full text-xs font-semibold ${taxStatusClass}`}>
                                {taxStatusText}
                                </span>
                            </div>
                        </div>
                    </div>

                    <h3 className="text-xl font-bold text-brand-navy mt-8 mb-4">{t.legalObligations}</h3>
                    <div className="p-5 border rounded-xl shadow-sm bg-gray-50 space-y-4">
                        <div className="flex justify-between items-center text-gray-700">
                            <span className="font-medium">{t.vatObligation}</span>
                            <span className={`px-3 py-1 rounded-full font-bold text-xs ${calculation.requiresVAT ? 'bg-brand-red text-white' : 'bg-green-500 text-white'}`}>
                                {calculation.requiresVAT ? t.vatYes(formatALL(CORE_CONSTANTS.VatThreshold / (rates['ALL'] || 1))) : t.vatNo(formatALL(CORE_CONSTANTS.VatThreshold / (rates['ALL'] || 1)))}
                            </span>
                        </div>
                        <div className="flex justify-between items-center text-gray-700">
                            <span className="font-medium">{t.divaObligation}</span>
                            <span className={`px-3 py-1 rounded-full font-bold text-xs ${calculation.requiresDIVA ? 'bg-brand-red text-white' : 'bg-green-500 text-white'}`}>
                                {calculation.requiresDIVA ? t.divaYes(formatALL(CORE_CONSTANTS.IncomeThresholdDIVA / (rates['ALL'] || 1))) : t.divaNo}
                            </span>
                        </div>
                        <InfoAlert title={t.foreignClients}>
                            {t.foreignClientsText}
                        </InfoAlert>
                    </div>
                </div>
            );
        };

        // --- KOMPONENTÃ‹T E PÃ‹RMBAJTJES ---

        const NewsUpdatesSection = ({ t, language }) => {
            const [status, setStatus] = useState('loading');
            const [items, setItems] = useState([]);
            const [error, setError] = useState(null);
            const isMountedRef = React.useRef(true);

            const locale = useMemo(() => {
                switch (language) {
                    case 'sq':
                        return 'sq-AL';
                    case 'it':
                        return 'it-IT';
                    default:
                        return 'en-GB';
                }
            }, [language]);

            const loadNews = useCallback(async ({ forceRefresh = false } = {}) => {
                if (!isMountedRef.current) return;
                setStatus('loading');
                setError(null);
                try {
                    const updates = await fetchNewsUpdates({ forceRefresh });
                    if (!isMountedRef.current) return;
                    setItems(updates);
                    setStatus(updates.length ? 'success' : 'empty');
                } catch (err) {
                    if (!isMountedRef.current) return;
                    setError(err);
                    setStatus('error');
                }
            }, []);

            useEffect(() => {
                isMountedRef.current = true;
                loadNews();
                return () => {
                    isMountedRef.current = false;
                };
            }, [loadNews]);

            const formatTimestamp = useCallback((value) => {
                if (!value) return '';
                try {
                    return new Date(value).toLocaleString(locale, {
                        dateStyle: 'medium',
                        timeStyle: 'short',
                    });
                } catch (err) {
                    console.warn('Failed to format news timestamp', err);
                    return value;
                }
            }, [locale]);

            const getHostName = extractHostName;

            const handleRetry = () => {
                loadNews({ forceRefresh: true });
            };

            return (
                <div className="bg-white p-6 rounded-xl shadow-lg">
                    <SectionTitle icon={IconNewspaper} title={t.newsTitle} />
                    <p className="text-gray-600 mb-6">{t.newsSubtitle}</p>

                    {status === 'loading' && (
                        <div className="flex items-center gap-3 text-brand-navy font-semibold">
                            <svg className="animate-spin h-5 w-5 text-brand-cyan" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle>
                                <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"></path>
                            </svg>
                            <span>{t.newsLoading}</span>
                        </div>
                    )}

                    {status === 'error' && (
                        <div className="bg-brand-red/10 border border-brand-red/40 text-brand-red rounded-lg p-4">
                            <p className="font-semibold">{t.newsError}</p>
                            {error?.message && (
                                <p className="text-sm mt-2 text-brand-red/80">{error.message}</p>
                            )}
                            <button
                                onClick={handleRetry}
                                className="mt-3 inline-flex items-center px-4 py-2 rounded-lg bg-brand-cyan text-white font-semibold hover:bg-brand-navy transition-colors"
                            >
                                {t.newsRetry}
                            </button>
                        </div>
                    )}

                    {status === 'empty' && (
                        <p className="text-gray-600">{t.newsEmpty}</p>
                    )}

                    {status === 'success' && (
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                            {items.map(item => {
                                const source = getHostName(item.link) || item.source;
                                const publishedAt = formatTimestamp(item.updatedAt);
                                return (
                                    <article
                                        key={item.id}
                                        className="p-4 border border-gray-200 rounded-lg hover:border-brand-cyan hover:shadow-md transition-shadow h-full flex flex-col"
                                    >
                                        <h3 className="text-lg font-semibold text-brand-navy mb-2">
                                            <a
                                                href={item.link}
                                                target="_blank"
                                                rel="noopener noreferrer"
                                                className="hover:underline"
                                            >
                                                {item.title}
                                            </a>
                                        </h3>
                                        <div className="text-sm text-gray-500 space-y-1 mb-4">
                                            {source && (
                                                <p>
                                                    <span className="font-medium text-gray-600">{t.newsSourceLabel}:</span> {source}
                                                </p>
                                            )}
                                            {publishedAt && (
                                                <p>
                                                    <span className="font-medium text-gray-600">{t.newsPublished}:</span> {publishedAt}
                                                </p>
                                            )}
                                        </div>
                                        <div className="mt-auto">
                                            <a
                                                href={item.link}
                                                target="_blank"
                                                rel="noopener noreferrer"
                                                className="inline-flex items-center text-sm font-semibold text-brand-cyan hover:text-brand-navy transition-colors"
                                            >
                                                {t.newsReadMore}
                                            </a>
                                        </div>
                                    </article>
                                );
                            })}
                        </div>
                    )}
                </div>
            );
        };

        const FreelancerTaxGuide = ({ t }) => {
            const guide = t.freelancerGuide;
            const [revenueTier, setRevenueTier] = useState('under5');
            const [clientMix, setClientMix] = useState('singleLocal');

            const detail = guide.details?.[revenueTier]?.[clientMix] ?? { title: '', summary: '', actions: [] };

            const statusStyles = {
                required: 'bg-brand-red/10 text-brand-red border border-brand-red/40',
                threshold: 'bg-yellow-100 text-yellow-800 border border-yellow-200',
                recommended: 'bg-brand-cyan/10 text-brand-navy border border-brand-cyan/40',
                monitor: 'bg-blue-50 text-blue-700 border border-blue-200',
                caution: 'bg-orange-100 text-orange-800 border border-orange-300',
            };

            const obligationsOrder = [
                'registerNipt',
                'socialSecurity',
                'incomeTax',
                'vat',
                'diva',
                'invoicing',
                'accounting',
            ];

            const determineStatus = (obligationId) => {
                switch (obligationId) {
                    case 'incomeTax':
                        if (revenueTier === 'above14') return 'required';
                        if (revenueTier === '10to14') return 'caution';
                        return 'monitor';
                    case 'vat':
                        if (revenueTier === 'under5') return 'monitor';
                        if (revenueTier === '5to10') return 'threshold';
                        return 'required';
                    case 'accounting':
                        if (clientMix === 'singleLocal') return 'caution';
                        if (revenueTier === 'under5' || revenueTier === '5to10') return 'recommended';
                        return 'required';
                    default:
                        return 'required';
                }
            };

            const buildNote = (obligationId) => {
                const base = guide.obligations?.[obligationId]?.note ?? '';
                const tierNote = guide.dynamicNotes?.[obligationId]?.[revenueTier] ?? '';
                const clientNote = guide.clientNotes?.[obligationId]?.[clientMix] ?? '';
                return [base, tierNote, clientNote].filter(Boolean).join(' ');
            };

            const warnings = [];
            if (clientMix === 'singleLocal') {
                warnings.push({ type: 'warning', title: guide.warnings.disguisedTitle, body: guide.warnings.disguisedBody });
            }
            if (revenueTier === '10to14' || revenueTier === 'above14') {
                warnings.push({ type: 'warning', title: guide.warnings.vatTitle, body: guide.warnings.vatBody });
            }
            if (revenueTier === 'above14') {
                warnings.push({ type: 'danger', title: guide.warnings.profitTitle, body: guide.warnings.profitBody });
            }

            const narrativeContent = (
                <div className="space-y-4">
                    <div>
                        <h4 className="text-sm font-semibold uppercase tracking-wide text-brand-navy/80">{guide.narrativeHeading}</h4>
                        <h3 className="text-2xl font-semibold text-brand-navy mt-1">{detail.title}</h3>
                        <p className="mt-3 text-gray-700 leading-relaxed">{detail.summary}</p>
                    </div>
                    {detail.actions?.length > 0 && (
                        <div>
                            <h5 className="text-sm font-semibold text-gray-700 uppercase tracking-wide">{guide.actionsHeading}</h5>
                            <ul className="mt-3 space-y-3">
                                {detail.actions.map((action, index) => (
                                    <li key={index} className="flex items-start gap-3">
                                        <span className="mt-1 h-2.5 w-2.5 rounded-full bg-brand-cyan flex-shrink-0" aria-hidden="true"></span>
                                        <span className="text-gray-700">{action}</span>
                                    </li>
                                ))}
                            </ul>
                        </div>
                    )}
                </div>
            );

            return (
                <div className="bg-white p-6 rounded-xl shadow-lg">
                    <SectionTitle icon={IconSettings} title={guide.title} />
                    <p className="text-gray-600 mt-2">{guide.intro}</p>

                    <div className="mt-6 space-y-6">
                        <div>
                            <h3 className="text-xs font-semibold uppercase tracking-wide text-gray-500">{guide.filtersTitle}</h3>
                            <div className="mt-4 grid gap-5 md:grid-cols-2">
                                <div>
                                    <label htmlFor="freelancer-guide-revenue" className="block text-sm font-semibold text-gray-700">
                                        {guide.revenueLabel}
                                    </label>
                                    <p className="text-xs text-gray-500 mt-1">{guide.revenueCaption}</p>
                                    <select
                                        id="freelancer-guide-revenue"
                                        value={revenueTier}
                                        onChange={(event) => setRevenueTier(event.target.value)}
                                        className="mt-2 w-full rounded-lg border border-gray-300 bg-white px-4 py-3 text-sm font-medium text-gray-800 focus:border-brand-cyan focus:ring-2 focus:ring-brand-cyan"
                                    >
                                        {Object.entries(guide.revenueOptions).map(([value, label]) => (
                                            <option key={value} value={value}>
                                                {label}
                                            </option>
                                        ))}
                                    </select>
                                </div>
                                <div>
                                    <label htmlFor="freelancer-guide-client" className="block text-sm font-semibold text-gray-700">
                                        {guide.clientMixLabel}
                                    </label>
                                    <p className="text-xs text-gray-500 mt-1">{guide.clientMixCaption}</p>
                                    <select
                                        id="freelancer-guide-client"
                                        value={clientMix}
                                        onChange={(event) => setClientMix(event.target.value)}
                                        className="mt-2 w-full rounded-lg border border-gray-300 bg-white px-4 py-3 text-sm font-medium text-gray-800 focus:border-brand-cyan focus:ring-2 focus:ring-brand-cyan"
                                    >
                                        {Object.entries(guide.clientMixOptions).map(([value, label]) => (
                                            <option key={value} value={value}>
                                                {label}
                                            </option>
                                        ))}
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div className="grid gap-6 lg:grid-cols-5">
                            <div className="lg:col-span-3 space-y-4">
                                <div className="hidden lg:block rounded-2xl border border-brand-cyan/20 bg-gradient-to-br from-brand-white to-brand-cyan/5 p-6 shadow-inner">
                                    {narrativeContent}
                                </div>

                                <details className="lg:hidden rounded-xl border border-gray-200 bg-white shadow-sm group">
                                    <summary className="flex cursor-pointer items-center justify-between px-4 py-3 text-sm font-semibold text-brand-navy [&::-webkit-details-marker]:hidden">
                                        <span>{guide.mobileNarrativeSummary}</span>
                                        <span className="transition-transform group-open:rotate-180">
                                            <IconChevronDown />
                                        </span>
                                    </summary>
                                    <div className="border-t border-gray-100 px-4 py-4 text-sm text-gray-700">
                                        {narrativeContent}
                                    </div>
                                </details>
                            </div>

                            <div className="lg:col-span-2 space-y-4">
                                {warnings.length > 0 && (
                                    <div className="space-y-3">
                                        <h4 className="text-sm font-semibold uppercase tracking-wide text-gray-500">{guide.warningsHeading}</h4>
                                        {warnings.map((warning, index) => (
                                            <InfoAlert key={`${warning.title}-${index}`} title={warning.title} type={warning.type}>
                                                {warning.body}
                                            </InfoAlert>
                                        ))}
                                    </div>
                                )}

                                <div className="rounded-xl border border-gray-200 overflow-hidden bg-white">
                                    <div className="bg-brand-navy px-4 py-3 text-sm font-semibold text-white">{guide.table.heading}</div>
                                    <div className="overflow-x-auto">
                                        <table className="min-w-full divide-y divide-gray-200 text-sm">
                                            <thead className="bg-gray-50">
                                                <tr>
                                                    <th scope="col" className="px-4 py-3 text-left font-semibold text-gray-700">{guide.table.obligation}</th>
                                                    <th scope="col" className="px-4 py-3 text-left font-semibold text-gray-700">{guide.table.status}</th>
                                                    <th scope="col" className="px-4 py-3 text-left font-semibold text-gray-700">{guide.table.notes}</th>
                                                </tr>
                                            </thead>
                                            <tbody className="divide-y divide-gray-100">
                                                {obligationsOrder.map((obligationId) => {
                                                    const label = guide.obligations?.[obligationId]?.label || obligationId;
                                                    const status = determineStatus(obligationId);
                                                    const note = buildNote(obligationId);
                                                    const statusLabel = guide.statuses?.[status] || status;
                                                    const statusDescription = guide.statusDescriptions?.[status] || '';
                                                    return (
                                                        <tr key={obligationId} className="align-top">
                                                            <td className="px-4 py-3 font-medium text-gray-800">{label}</td>
                                                            <td className="px-4 py-3">
                                                                <span
                                                                    className={`inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold ${statusStyles[status] || ''}`}
                                                                    title={statusDescription}
                                                                >
                                                                    {statusLabel}
                                                                </span>
                                                            </td>
                                                            <td className="px-4 py-3 text-gray-600">{note}</td>
                                                        </tr>
                                                    );
                                                })}
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const InfoSection = ({ t }) => (
            <div className="bg-white p-6 rounded-xl shadow-lg">
                <SectionTitle icon={IconInfo} title={t.infoTitle} />
                <div className="space-y-6">
                    <p className="text-gray-600">{t.infoIntro}</p>
                    
                    <h3 className="text-xl font-semibold text-gray-800">{t.infoGrossNetTitle}</h3>
                    <p className="text-gray-600" dangerouslySetInnerHTML={{ __html: t.infoGrossNetText }} />
                    
                    <h3 className="text-xl font-semibold text-gray-800">{t.infoContributionsTitle}</h3>
                    <p className="text-gray-600" dangerouslySetInnerHTML={{ __html: t.infoContributionsText }} />
                    
                    <h3 className="text-xl font-semibold text-gray-800">{t.infoTapTitle}</h3>
                    <p className="text-gray-600" dangerouslySetInnerHTML={{ __html: t.infoTapText }} />
                    
                    <h3 className="text-xl font-semibold text-gray-800">{t.infoFreelancerTitle}</h3>
                    <p className="text-gray-600" dangerouslySetInnerHTML={{ __html: t.infoFreelancerText }} />
                </div>
            </div>
        );

        const AccordionItem = ({ title, children }) => {
            const [isOpen, setIsOpen] = useState(false);
            return (
                <div className="border-b">
                    <button
                        onClick={() => setIsOpen(!isOpen)}
                        className="flex justify-between items-center w-full py-5 text-left text-lg font-semibold text-gray-800"
                    >
                        <span>{title}</span>
                        <span className={`transform transition-transform duration-300 ${isOpen ? 'rotate-180 text-brand-cyan' : 'text-gray-400'}`}>
                            <IconChevronDown />
                        </span>
                    </button>
                    <div className={`overflow-hidden transition-all duration-300 ${isOpen ? 'max-h-full' : 'max-h-0'}`}>
                        <div className="pb-5 pr-10 text-gray-600" dangerouslySetInnerHTML={{ __html: children }} />
                    </div>
                </div>
            );
        };

        const FAQSection = ({ t }) => (
            <div className="bg-white p-6 rounded-xl shadow-lg">
                <SectionTitle icon={IconHelp} title={t.faqTitle} />
                <div>
                    <AccordionItem title={t.faq1Title}>{t.faq1Text}</AccordionItem>
                    <AccordionItem title={t.faq2Title}>{t.faq2Text}</AccordionItem>
                    <AccordionItem title={t.faq3Title}>{t.faq3Text}</AccordionItem>
                    <AccordionItem title={t.faq4Title}>{t.faq4Text}</AccordionItem>
                    <AccordionItem title={t.faq5Title}>{t.faq5Text}</AccordionItem>
                    <AccordionItem title={t.faq6Title}>{t.faq6Text}</AccordionItem> {/* E RE */}
                </div>
            </div>
        );

        const LinksSection = ({ t }) => (
            <div className="bg-white p-6 rounded-xl shadow-lg">
                <SectionTitle icon={IconLink} title={t.linksTitle} />
                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <a href="https://www.tatime.gov.al/" target="_blank" rel="noopener noreferrer" className="p-4 border rounded-lg hover:shadow-md hover:border-brand-cyan transition-all">
                        <span className="font-semibold text-brand-navy">{t.linksDpt}</span>
                        <p className="text-sm text-gray-500">Burimi zyrtar pÃ«r taksat dhe legjislacionin fiskal.</p>
                    </a>
                    <a href="https://qkb.gov.al/" target="_blank" rel="noopener noreferrer" className="p-4 border rounded-lg hover:shadow-md hover:border-brand-cyan transition-all">
                        <span className="font-semibold text-brand-navy">{t.linksQkb}</span>
                        <p className="text-sm text-gray-500">PÃ«r regjistrimin e biznesit tuaj si profesionist i lirÃ«.</p>
                    </a>
                    <a href="https://www.issh.gov.al/" target="_blank" rel="noopener noreferrer" className="p-4 border rounded-lg hover:shadow-md hover:border-brand-cyan transition-all">
                        <span className="font-semibold text-brand-navy">{t.linksSigurime}</span>
                        <p className="text-sm text-gray-500">Informacion mbi kontributet shoqÃ«rore dhe shÃ«ndetÃ«sore.</p>
                    </a>
                    <a href="https://qbz.gov.al/eli/html/00000000-0000-0000-0000-00000007961a" target="_blank" rel="noopener noreferrer" className="p-4 border rounded-lg hover:shadow-md hover:border-brand-cyan transition-all">
                        <span className="font-semibold text-brand-navy">{t.linksKodiPunes}</span>
                        <p className="text-sm text-gray-500">TÃ« drejtat dhe detyrimet tuaja si punÃ«marrÃ«s.</p>
                    </a>
                </div>
            </div>
        );

        const ContactSection = ({ t }) => (
            <div className="bg-white p-6 rounded-xl shadow-lg">
                <SectionTitle icon={IconMail} title={t.navContact} />
                <div>
                    <p className="text-gray-700">
                        Keni pyetje ose sugjerime? Na kontaktoni nÃ«: <a href="mailto:info@llogaritesi.al" className="text-brand-cyan font-semibold hover:underline">info@llogaritesi.al</a>
                    </p>
                    <p className="text-gray-500 text-sm mt-4">
                        Ky mjet Ã«shtÃ« krijuar nga <a href="https://kejsan-coku.netlify.app/" target="_blank" rel="noopener noreferrer" className="font-semibold text-brand-navy hover:underline">Kejsan Coku</a> dhe ofrohet falas pÃ«r komunitetin.
                    </p>
                </div>
            </div>
        );


        const DetailRow = ({ label, value, currency, rates, isConstant = false, isHeader = false, isTotal = false }) => (
            <div className={`flex justify-between items-center py-1.5 ${isTotal ? 'text-base' : 'text-sm'}`}>
                <span className={`${isConstant ? 'text-gray-500' : isHeader ? 'font-medium text-gray-800' : 'text-gray-700'}`}>
                    {label}
                </span>
                <span className={`font-semibold ${isConstant ? 'text-gray-500' : isTotal ? 'text-brand-navy text-lg' : 'text-brand-cyan'}`}>
                    {formatCurrency(value, currency, rates)}
                </span>
            </div>
        );

        // --- KOMPONENTI KRYESOR APP ---

        const App = () => {
            const [activePage, setActivePage] = useState('employee');
            const [language, setLanguage] = useState('sq');
            const [currency, setCurrency] = useState('ALL');
            const [rates, setRates] = useState({ 'ALL': 1, 'EUR': 107.53, 'USD': 102.04 }); // Vlera fallback
            
            const t = useMemo(() => translations[language], [language]);

            // 1. API pÃ«r kursin e kÃ«mbimit
            useEffect(() => {
                const fetchRates = async () => {
                    try {
                        const response = await fetch('https://open.er-api.com/v6/latest/EUR');
                        if (!response.ok) throw new Error('Network response was not ok');
                        const data = await response.json();
                        
                        const rateALL = data.rates.ALL;
                        const rateUSD = data.rates.USD;

                        setRates({
                            'ALL': 1,
                            'EUR': rateALL,
                            'USD': rateALL / rateUSD
                        });

                    } catch (error) {
                        console.error("Failed to fetch exchange rates, using fallback.", error);
                        setRates({ 'ALL': 1, 'EUR': 107.53, 'USD': 102.04 });
                    }
                };

                fetchRates();
            }, []);
            
            // 2. Ruaj preferencat e pÃ«rdoruesit
            useEffect(() => {
                document.documentElement.lang = language;
            }, [language]);

            // PÃ«rcakto komponentin aktiv
            let ActiveComponent;
            switch (activePage) {
                case 'employee':
                    ActiveComponent = <EmployeeCalculator t={t} currency={currency} rates={rates} />;
                    break;
                case 'freelancer':
                    ActiveComponent = <FreeProfCalculator t={t} currency={currency} rates={rates} isInfluencer={false} />;
                    break;
                case 'influencer': // RAST I RI
                    ActiveComponent = <FreeProfCalculator t={t} currency={currency} rates={rates} isInfluencer={true} />;
                    break;
                case 'freelancer-guide':
                    ActiveComponent = <FreelancerTaxGuide t={t} />;
                    break;
                case 'news':
                    ActiveComponent = <NewsUpdatesSection t={t} language={language} />;
                    break;
                case 'info':
                    ActiveComponent = <InfoSection t={t} />;
                    break;
                case 'faq':
                    ActiveComponent = <FAQSection t={t} />;
                    break;
                case 'links':
                    ActiveComponent = <LinksSection t={t} />;
                    break;
                case 'contact':
                    ActiveComponent = <ContactSection t={t} />;
                    break;
                default:
                    ActiveComponent = <EmployeeCalculator t={t} currency={currency} rates={rates} />;
            }

            return (
                <React.Fragment>
                    <Header 
                        lang={language} 
                        setLang={setLanguage} 
                        currency={currency} 
                        setCurrency={setCurrency} 
                        t={t} 
                    />
                    <div className="main-layout max-w-7xl mx-auto w-full flex flex-col lg:flex-row gap-8 py-8 px-4">
                        <Sidebar activePage={activePage} setActivePage={setActivePage} t={t} />
                        <main className="flex-1 min-w-0">
                            {ActiveComponent}
                        </main>
                    </div>
                    <Footer t={t} />
                </React.Fragment>
            );
        };

        // Ngarkimi i Aplikacionit React nÃ« DOM
        const container = document.getElementById('root');
        const root = ReactDOM.createRoot(container);
        root.render(<App />);
    </script>

</body>
</html>

